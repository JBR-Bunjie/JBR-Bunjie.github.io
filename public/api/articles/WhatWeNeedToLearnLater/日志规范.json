{"title":"","uid":"f73a8e23e6f6f669cf99c7dba8fa0722","slug":"WhatWeNeedToLearnLater/日志规范","date":"2023-03-07T16:14:46.495Z","updated":"2021-09-13T13:14:06.000Z","comments":true,"path":"api/articles/WhatWeNeedToLearnLater/日志规范.json","keywords":null,"cover":null,"content":"<h1 id=\"日志规范\">日志规范</h1>\r\n<h1 id=\"日志格式\">日志格式</h1>\r\n<p>通用前缀 class.method LEVEL | KEY | SUB_KEY | param1=x;param2=x;... |\r\nrs=JSON | traceId=xxx[ | 其它自定义日志]</p>\r\n<p>KEY：标示业务领域，如“领券”</p>\r\n<p>SUBKEY：标示业务领域中具体的逻辑，如“策略决策”、“权益决策”、“调用UMP”等</p>\r\n<p>LEVEL：DEBUG/TRACE/MONITOR/WARN</p>\r\n<p>要求：</p>\r\n<p>查找日志时，再一次查询中可以顺利通过一个或多个关键字的组合，找到一条完整的业务处理链路。</p>\r\n<p>如通过一个userId和KEY，可以完整的找到这个用户的领券全过程。</p>\r\n<h1 id=\"调试日志\">调试日志</h1>\r\n<p>仅在调试阶段需要输出，线上一般不输出。</p>\r\n<p>日志可以包括每次请求的详细出入参等信息。</p>\r\n<p>线上必须有开关可以控制这类日志的打印。</p>\r\n<p>level=DEBUG</p>\r\n<h1 id=\"普通日志\">普通日志</h1>\r\n<p>用户追踪必要的代码执行记录，线上一般打印出来，大促时可以降级。</p>\r\n<p>日志可以包括每次外部请求的详细出入参，以及内部请求的关键参数。</p>\r\n<p>请求出入参较长时，可考虑只打印关键参数。</p>\r\n<p>level=TRACE</p>\r\n<h1 id=\"业务指标项日志\">业务指标项日志</h1>\r\n<p>记录必要的业务活动，通过sls或sunfire产出业务大盘</p>\r\n<p>level=MONITOR</p>\r\n<h1 id=\"监控报警项日志\">监控报警项日志</h1>\r\n<p>通过sunfire产出报警</p>\r\n<p>level=WARN</p>\r\n<h1 id=\"自定义日志\">自定义日志</h1>\r\n<p>不做格式要求，自行打印，注意避免过量日志造成线上磁盘资源紧张</p>\r\n","text":"日志规范 日志格式 通用前缀 class.method LEVEL | KEY | SUB_KEY | param1=x;param2=x;... | rs=JSON | traceId=xxx[ | 其它自定义日志] KEY：标示业务领域，如“领券” SUBKEY：标示业务领域...","link":"","photos":[],"count_time":{"symbolsCount":616,"symbolsTime":"1 mins."},"categories":[],"tags":[],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E6%97%A5%E5%BF%97%E8%A7%84%E8%8C%83\"><span class=\"toc-text\">日志规范</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E6%97%A5%E5%BF%97%E6%A0%BC%E5%BC%8F\"><span class=\"toc-text\">日志格式</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E8%B0%83%E8%AF%95%E6%97%A5%E5%BF%97\"><span class=\"toc-text\">调试日志</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E6%99%AE%E9%80%9A%E6%97%A5%E5%BF%97\"><span class=\"toc-text\">普通日志</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E4%B8%9A%E5%8A%A1%E6%8C%87%E6%A0%87%E9%A1%B9%E6%97%A5%E5%BF%97\"><span class=\"toc-text\">业务指标项日志</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E7%9B%91%E6%8E%A7%E6%8A%A5%E8%AD%A6%E9%A1%B9%E6%97%A5%E5%BF%97\"><span class=\"toc-text\">监控报警项日志</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%97%A5%E5%BF%97\"><span class=\"toc-text\">自定义日志</span></a></li></ol>","author":{"name":"JBR_Bunjie","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/90251718?v=4","link":"/","description":"仿生程序员会在光环上遇见AI乐正绫吗？","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili-fill.svg","link":"https://space.bilibili.com/415377461"},"github":{"icon":"/svg/social_github.svg","link":"https://github.com/JBR-Bunjie"}}}},"mapped":true,"prev_post":{"title":"learningOpenGl Chapter 1.1","uid":"84a91876a3b2e3a40cf47c0b0209858c","slug":"Technical Artist/Opengl/learnopengl-cn.readthedocs.io/01GettingStarted/00.OpenGL","date":"2023-03-08T02:20:08.000Z","updated":"2023-03-10T10:02:28.000Z","comments":true,"path":"api/articles/Technical Artist/Opengl/learnopengl-cn.readthedocs.io/01GettingStarted/00.OpenGL.json","keywords":null,"cover":"https://raw.githubusercontent.com/JBR-Bunjie/JBR-Bunjie/main/back.jpg","text":"当你使用多个捕获组时，请务必小心NULL！这是某个捕获组未能捕获任何内容的结果！ 验证：是否有bug 在线正则表达式测试 中文 (oschina.net) 在线正则验证 英文 regex101: build, test, and debug regex 在线验证正则表达式结构：R...","link":"","photos":[],"count_time":{"symbolsCount":"5.8k","symbolsTime":"5 mins."},"categories":[{"name":"TA","slug":"TA","count":14,"path":"api/categories/TA.json"}],"tags":[{"name":"Opengl","slug":"Opengl","count":14,"path":"api/tags/Opengl.json"},{"name":"Shader","slug":"Shader","count":20,"path":"api/tags/Shader.json"}],"author":{"name":"JBR_Bunjie","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/90251718?v=4","link":"/","description":"仿生程序员会在光环上遇见AI乐正绫吗？","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili-fill.svg","link":"https://space.bilibili.com/415377461"},"github":{"icon":"/svg/social_github.svg","link":"https://github.com/JBR-Bunjie"}}}}},"next_post":{"title":"","uid":"f73a8e23e6f6f669cf99c7dba8fa0722","slug":"WhatWeNeedToLearnLater/如何合理地构建你的Java项目","date":"2023-03-07T16:14:46.493Z","updated":"2021-09-15T15:40:15.000Z","comments":true,"path":"api/articles/WhatWeNeedToLearnLater/如何合理地构建你的Java项目.json","keywords":null,"cover":null,"text":"切片：SpringAOP 请不要使用小写加下划线来命名你的变量，使用驼峰规则来命名 将判断用的等式改为调用.equals()，并且在采用.equals()前使用常量，括号里装填变量即： &quot;abc&quot;.equals(var) ; &#x2F;&#x2F; 或者使用...","link":"","photos":[],"count_time":{"symbolsCount":341,"symbolsTime":"1 mins."},"categories":[],"tags":[],"author":{"name":"JBR_Bunjie","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/90251718?v=4","link":"/","description":"仿生程序员会在光环上遇见AI乐正绫吗？","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili-fill.svg","link":"https://space.bilibili.com/415377461"},"github":{"icon":"/svg/social_github.svg","link":"https://github.com/JBR-Bunjie"}}}}}}