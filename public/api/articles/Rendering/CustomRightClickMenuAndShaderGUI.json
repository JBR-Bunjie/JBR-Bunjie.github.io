{"title":"Custom Right-Click Menu And Shader GUI排列","uid":"a21e0605e124236f924885120b82421a","slug":"Rendering/CustomRightClickMenuAndShaderGUI","date":"2023-04-10T08:32:30.000Z","updated":"2023-10-27T20:19:38.000Z","comments":true,"path":"api/articles/Rendering/CustomRightClickMenuAndShaderGUI.json","keywords":null,"cover":"https://raw.githubusercontent.com/JBR-Bunjie/JBR-Bunjie/main/back.jpg","content":"<h1 id=\"custom-right-click-menu-and-shader-gui\">Custom Right-Click Menu\r\nAnd Shader GUI</h1>\r\n<blockquote>\r\n<p>All the operations in this project should be done in a folder named\r\n\"Editor\", no matter where this folder is though.</p>\r\n</blockquote>\r\n<h2 id=\"what-do-we-want-to-do\">What do we want to do?</h2>\r\n<p>we want to set up a custom file template in the right-click menu, so\r\nwe can quickly create the files that we need.</p>\r\n<p>To archive this, we need to:</p>\r\n<ul>\r\n<li>Set up the file template</li>\r\n<li>Create C# Scripts which could be embedded into the editor to archive\r\nthe file creating logic</li>\r\n</ul>\r\n<p>In this project, I will take the \"URP Unlit Shader\" as an example.\r\nAnd we will learn how to custom the shader ui later, too.</p>\r\n<h2 id=\"set-up-a-template-for-shader\">Set up a template for shader</h2>\r\n<p>I will put a simple example to explain:</p>\r\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Shader <span class=\"string\">&quot;Custom URP Shader/#NAME#&quot;</span> &#123;</span><br><span class=\"line\">    Properties &#123;&#125;</span><br><span class=\"line\">    SubShader &#123;</span><br><span class=\"line\">        Tags &#123;<span class=\"string\">&quot;RenderType&quot;</span> = <span class=\"string\">&quot;Opaque&quot;</span> <span class=\"string\">&quot;RenderPipeline&quot;</span> = <span class=\"string\">&quot;UniversalPipeline&quot;</span> <span class=\"string\">&quot;Queue&quot;</span> = <span class=\"string\">&quot;Geometry&quot;</span>&#125;</span><br><span class=\"line\">        Pass &#123;</span><br><span class=\"line\">            Name <span class=\"string\">&quot;ForwardLit&quot;</span></span><br><span class=\"line\">            Tags &#123;<span class=\"string\">&quot;LightMode&quot;</span> = <span class=\"string\">&quot;UniversalForward&quot;</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            HLSLPROGRAM</span><br><span class=\"line\">        \t<span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;Packages/com.unity.render-pipelines.universal/ShaderLibrary/Core.hlsl&quot;</span></span></span><br><span class=\"line\">            <span class=\"meta\">#<span class=\"keyword\">pragma</span> vertex vert</span></span><br><span class=\"line\">            <span class=\"meta\">#<span class=\"keyword\">pragma</span> fragment frag</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">struct</span> appdata &#123;...&#125;;</span><br><span class=\"line\">            <span class=\"keyword\">struct</span> <span class=\"title class_\">v2f</span> &#123;...&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"function\">v2f <span class=\"title\">vert</span><span class=\"params\">(appdata v)</span> </span>&#123;...&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"function\">half4 <span class=\"title\">frag</span><span class=\"params\">(v2f i)</span>: SV_Target &#123;</span>...&#125;</span><br><span class=\"line\">            ENDHLSL</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    CustomEditor <span class=\"string\">&quot;ReArchiving.Editor.CreateURPShader&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\r\n<p>There are three important parts:</p>\r\n<ul>\r\n<li><code>Shader \"Custom URP Shader/#NAME#\"</code> in the first line,\r\nthe <code>#NAME#</code> part will be replaced by the script with the\r\nfile's name.</li>\r\n<li><code>CustomEditor \"ReArchiving.Editor.CreateURPShader\"</code>, we\r\nuse the <code>CustomEditor</code> command to archive the Custom UI of a\r\nsingle shader in the Inspector Tab. See: <a\r\nhref=\"https://docs.unity3d.com/Manual/SL-CustomEditor.html\">Unity -\r\nManual: ShaderLab: assigning a custom editor (unity3d.com)</a></li>\r\n<li>And the rest part is the entity, we can leave the template code\r\nhere.</li>\r\n</ul>\r\n<h2 id=\"custom-shader-and-its-tab\">Custom Shader And its Tab</h2>\r\n<p>After defining the template, we need to define the control\r\nscript!</p>\r\n<p>Here is the code:</p>\r\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// -----------------------------------------</span></span><br><span class=\"line\"><span class=\"comment\">// Base class named `CreateCustomItemInMenu`</span></span><br><span class=\"line\"><span class=\"comment\">// -----------------------------------------</span></span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEditor;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.IO;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Text;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEditor.ProjectWindowCallback;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Text.RegularExpressions;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">CreateCustomItemInMenu</span> &#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"built_in\">string</span> <span class=\"title\">GetSelectedPathOrFallback</span>()</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">string</span> path = <span class=\"string\">&quot;Assets&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">foreach</span> (Object obj <span class=\"keyword\">in</span> Selection.GetFiltered(<span class=\"keyword\">typeof</span>(Object), SelectionMode.Assets)) &#123;</span><br><span class=\"line\">            path = AssetDatabase.GetAssetPath(obj);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (!<span class=\"built_in\">string</span>.IsNullOrEmpty(path) &amp;&amp; File.Exists(path)) &#123;</span><br><span class=\"line\">                path = Path.GetDirectoryName(path);</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> path;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title\">EndAction</span> : <span class=\"title\">EndNameEditAction</span> &#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">override</span> <span class=\"keyword\">void</span> <span class=\"title\">Action</span>(<span class=\"params\"><span class=\"built_in\">int</span> instanceId, <span class=\"built_in\">string</span> pathName, <span class=\"built_in\">string</span> resourceFile</span>)</span> &#123;</span><br><span class=\"line\">        Object o = CreateScriptAssetFromTemplate(pathName, resourceFile);</span><br><span class=\"line\">        ProjectWindowUtil.ShowCreatedAsset(o);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> Object <span class=\"title\">CreateScriptAssetFromTemplate</span>(<span class=\"params\"><span class=\"built_in\">string</span> pathName, <span class=\"built_in\">string</span> resourceFile</span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">string</span> fullPath = Path.GetFullPath(pathName);</span><br><span class=\"line\">        StreamReader streamReader = <span class=\"keyword\">new</span> StreamReader(resourceFile);</span><br><span class=\"line\">        <span class=\"built_in\">string</span> text = streamReader.ReadToEnd(); <span class=\"comment\">// read the template info</span></span><br><span class=\"line\">        streamReader.Close();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"built_in\">string</span> fileNameWithoutExtension = Path.GetFileNameWithoutExtension(pathName);</span><br><span class=\"line\">        text = Regex.Replace(text, <span class=\"string\">&quot;#NAME#&quot;</span>, fileNameWithoutExtension); <span class=\"comment\">// replace `#NAME#` in template and replace to filename</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// write the changed resources into the original file</span></span><br><span class=\"line\">        <span class=\"built_in\">bool</span> encoderShouldEmitUTF8Identifier = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"built_in\">bool</span> throwOnInvalidBytes = <span class=\"literal\">false</span>;</span><br><span class=\"line\">        UTF8Encoding encoding = <span class=\"keyword\">new</span> UTF8Encoding(encoderShouldEmitUTF8Identifier, throwOnInvalidBytes);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"built_in\">bool</span> append = <span class=\"literal\">false</span>;</span><br><span class=\"line\">        StreamWriter streamWriter = <span class=\"keyword\">new</span> StreamWriter(fullPath, append, encoding);</span><br><span class=\"line\"></span><br><span class=\"line\">        streamWriter.Write(text);</span><br><span class=\"line\">        streamWriter.Close();</span><br><span class=\"line\">        AssetDatabase.ImportAsset(pathName);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> AssetDatabase.LoadAssetAtPath(pathName, <span class=\"keyword\">typeof</span>(Object));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// -----------------------------------------</span></span><br><span class=\"line\"><span class=\"comment\">// Base class named `CreateURPShader`</span></span><br><span class=\"line\"><span class=\"comment\">// -----------------------------------------</span></span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEditor;</span><br><span class=\"line\"><span class=\"keyword\">using</span> UnityEngine;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">CreateURPShader</span> : <span class=\"title\">CreateCustomItemInMenu</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">const</span> <span class=\"built_in\">string</span> TemplatePath = <span class=\"string\">&quot;Assets/CustomShaderGUI/Editor/Template/URPShader.shader&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    [<span class=\"meta\">MenuItem(<span class=\"string\">&quot;Assets/Create/Shader/URP Shader&quot;</span>)</span>]</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">CreateFileFromTemplate</span>()</span> &#123;</span><br><span class=\"line\">        ProjectWindowUtil.StartNameEditingIfProjectWindowExists(</span><br><span class=\"line\">            <span class=\"number\">0</span>,</span><br><span class=\"line\">            ScriptableObject.CreateInstance&lt;EndAction&gt;(),</span><br><span class=\"line\">            GetSelectedPathOrFallback() + <span class=\"string\">&quot;/URPShader.shader&quot;</span>,</span><br><span class=\"line\">            <span class=\"literal\">null</span>,</span><br><span class=\"line\">            TemplatePath</span><br><span class=\"line\">        );</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\r\n<p>It's important to divide the function into parts so that we can reuse\r\nand debug easier.</p>\r\n<p>And now you can see the template in the right-click menu:</p>\r\n<figure>\r\n<img\r\nsrc=\"....\\images\\Dev\\Unity\\Archives\\CustomRightClickMenuAndShaderGUI\\001.png\"\r\nalt=\"image-20230409172030993\" />\r\n<figcaption aria-hidden=\"true\">image-20230409172030993</figcaption>\r\n</figure>\r\n<h2 id=\"define-the-shader-gui\">Define the Shader GUI</h2>\r\n<p>We can directly use the built-in properties of unity to custom the\r\nGUI, see:</p>\r\n<blockquote>\r\n<p><a href=\"https://zhuanlan.zhihu.com/p/93194054\">Shader\r\n面板上常用的一些内置枚举 UI - 知乎 (zhihu.com)</a> &gt; <a\r\nhref=\"https://blog.csdn.net/candycat1992/article/details/51417965\">【Unity\r\nShader】自定义材质面板的小技巧<em>unity shader\r\nbool</em>妈妈说女孩子要自立自强的博客-CSDN 博客</a></p>\r\n</blockquote>\r\n<p>But here we choose to use scripts to custom the shader UI which is\r\nmore powerful and flexible.</p>\r\n<p>Here is the basic framework I suggested:</p>\r\n<h3 id=\"custom-shader-gui-though-scripts\">Custom Shader GUI Though\r\nScripts</h3>\r\n<h4 id=\"setup-namespace\">Setup namespace:</h4>\r\n<p>As for the start, we need to derive from an abstract class\r\n<code>ShaderGUI</code>. <a\r\nhref=\"https://docs.unity3d.com/ScriptReference/ShaderGUI.html\">Unity -\r\nScripting API: ShaderGUI (unity3d.com)</a></p>\r\n<blockquote>\r\n<p>Derive from this class for controlling how shader properties should\r\nbe presented.</p>\r\n<p>For a shader to use this custom GUI, use the\r\n<code>CustomEditor</code> property in the shader. Note that\r\n<code>CustomEditor</code> can also be used for classes deriving from\r\n<code>MaterialEditor</code> (search for:\r\n<code>Custom Material Editors</code>). Note: Only the ShaderGUI approach\r\nworks with Substance materials this is therefore the recommended\r\napproach to custom gui for shaders.</p>\r\n</blockquote>\r\n<figure class=\"highlight c#\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">namespace</span> <span class=\"title\">ReArchiving.Editor</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">SimpleShaderGUI</span> : <span class=\"title\">ShaderGUI</span> &#123;</span><br><span class=\"line\">        ...</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\r\n<h4 id=\"declare-variables\">Declare variables</h4>\r\n<p>In this section, we have three things to do:</p>\r\n<ul>\r\n<li>declare all the GUIContent which we want to show aside. Suggest\r\ndefining this section with the name <code>GUIDescriptions</code>.</li>\r\n<li>declare all the strings which we have defined inside the target\r\nshader. We can define more strings than properties in the target shader\r\nitself because we have to do more operations before using these\r\nvariables and we can exclude the properties that do not exist in the\r\nshader easily at that time. Suggest defining this section with the name\r\n<code>InsideMaterialProperties</code>.</li>\r\n<li>declare all the status variables. We use them to decide should\r\ncorresponding variables be displayed.</li>\r\n</ul>\r\n<p>Here is the example code of this section:</p>\r\n<figure class=\"highlight c#\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">      <span class=\"meta\">#<span class=\"keyword\">region</span> DataArea</span></span><br><span class=\"line\">      <span class=\"keyword\">private</span> <span class=\"keyword\">struct</span> GUIDescriptions &#123;</span><br><span class=\"line\">          <span class=\"comment\">// Folder</span></span><br><span class=\"line\">          <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">readonly</span> GUIContent SurfaceOptionFold = <span class=\"keyword\">new</span> GUIContent(<span class=\"string\">&quot;Surface Option Fold&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">          <span class=\"comment\">// Material Properties</span></span><br><span class=\"line\">          <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">readonly</span> GUIContent Test = <span class=\"keyword\">new</span> GUIContent(<span class=\"string\">&quot;Test&quot;</span>);</span><br><span class=\"line\">          <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">readonly</span> GUIContent MainTex = <span class=\"keyword\">new</span> GUIContent(<span class=\"string\">&quot;Main Texture&quot;</span>);</span><br><span class=\"line\">          <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">readonly</span> GUIContent MainColor = <span class=\"keyword\">new</span> GUIContent(<span class=\"string\">&quot;Main Color&quot;</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">private</span> <span class=\"keyword\">struct</span> InsideMaterialProperties &#123;</span><br><span class=\"line\">          <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">readonly</span> <span class=\"built_in\">string</span> Test = <span class=\"string\">&quot;_Test&quot;</span>;</span><br><span class=\"line\">          <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">readonly</span> <span class=\"built_in\">string</span> MainTex = <span class=\"string\">&quot;_MainTex&quot;</span>;</span><br><span class=\"line\">          <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">readonly</span> <span class=\"built_in\">string</span> MainColor = <span class=\"string\">&quot;_MainColor&quot;</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// After `Styles` and `MporpertyNames` were defined, we can then announce the variables for checking:</span></span><br><span class=\"line\">      <span class=\"comment\">// As you can see, we will use two data types here: one is the `bool` and another one is the `MaterialProperty`</span></span><br><span class=\"line\"><span class=\"comment\">// This is because we use the `bool` type to store the Foldout UI which is independent of Properties that are defined in Material</span></span><br><span class=\"line\"><span class=\"comment\">// And relatively, the `MaterialProperties` will store the Material related to Properties.</span></span><br><span class=\"line\">      <span class=\"comment\">// There is an exception though, that is the `EditorPreKey`, we use that to</span></span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// `EditorPreKey`, we use this to store the foldout status(is this foldout opened or not)</span></span><br><span class=\"line\">      <span class=\"keyword\">private</span> <span class=\"keyword\">const</span> <span class=\"built_in\">string</span> EditorPreKey = <span class=\"string\">&quot;ReArchiving:ShaderGUI:&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// Foldout status</span></span><br><span class=\"line\">      <span class=\"keyword\">private</span> <span class=\"built_in\">bool</span> m_SurfaceOptionsFoldout;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// Properties</span></span><br><span class=\"line\">      <span class=\"keyword\">private</span> MaterialProperty m_WorkflowModeProp;</span><br><span class=\"line\">      <span class=\"keyword\">private</span> MaterialProperty m_Test;</span><br><span class=\"line\">      <span class=\"keyword\">private</span> MaterialProperty m_MainTex;</span><br><span class=\"line\">      <span class=\"keyword\">private</span> MaterialProperty m_MainColor;</span><br><span class=\"line\">      <span class=\"meta\">#<span class=\"keyword\">endregion</span></span></span><br></pre></td></tr></table></figure>\r\n<h4 id=\"override-the-ongui-function\">Override the <code>OnGUI</code>\r\nfunction:</h4>\r\n<p>Although we haven't defined the other functions we need to use, we\r\ndefine the override <code>OnGUI</code> function here to help us clear\r\nthe things we need to do. <a\r\nhref=\"https://docs.unity3d.com/ScriptReference/ShaderGUI.OnGUI.html\">Unity\r\n- Scripting API: ShaderGUI.OnGUI (unity3d.com)</a></p>\r\n<p>So, what should we do here?</p>\r\n<p>We need to decide which property, GUIConent and type we want to show\r\nup in the Inspector tab. So we need to <strong>check the Usability of\r\nthe properties</strong> and <strong>set them up</strong>. And that's\r\nwhat we want to do.</p>\r\n<p>And, before we start coding, we'd better understand the\r\n<code>OnGUI</code> function. This function has two parameters:\r\n<code>MaterialEditor</code> and <code>MaterialProperty</code></p>\r\n<ul>\r\n<li><code>MaterialEditor</code>: The MaterialEditor that is calling this\r\nOnGUI (the 'owner'). <a\r\nhref=\"https://docs.unity3d.com/ScriptReference/MaterialEditor.html\">Unity\r\n- Scripting API: MaterialEditor (unity3d.com)</a></li>\r\n<li><code>MaterialProperty</code>: Material properties of the currently\r\nselected shader. <a\r\nhref=\"https://docs.unity3d.com/ScriptReference/MaterialProperty.html\">Unity\r\n- Scripting API: MaterialProperty (unity3d.com)</a></li>\r\n</ul>\r\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">region</span> GUI</span></span><br><span class=\"line\"><span class=\"comment\">// To define a custom shader GUI use the methods of materialEditor to render controls for the properties array.</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">override</span> <span class=\"keyword\">void</span> <span class=\"title\">OnGUI</span>(<span class=\"params\">MaterialEditor materialEditor, MaterialProperty[] properties</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// Check the usability. Well, we will define the `GetFoldoutState` function later</span></span><br><span class=\"line\">    m_SurfaceOptionsFoldout = GetFoldoutState(<span class=\"string\">&quot;SurfaceOptions&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// https://docs.unity.cn/cn/2021.3/ScriptReference/ShaderGUI.FindProperty.html</span></span><br><span class=\"line\">    <span class=\"comment\">// Returns MaterialProperty if the material property was found, otherwise null.</span></span><br><span class=\"line\">    m_Test = FindProperty(MPropertyNames.Test, properties, <span class=\"literal\">false</span>);</span><br><span class=\"line\">    m_MainTex = FindProperty(MPropertyNames.MainTex, properties, <span class=\"literal\">false</span>);</span><br><span class=\"line\">    m_MainColor = FindProperty(MPropertyNames.MainColor, properties, <span class=\"literal\">false</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Modify and apply the custom GUI</span></span><br><span class=\"line\">    EditorGUI.BeginChangeCheck(); <span class=\"comment\">// https://docs.unity3d.com/ScriptReference/EditorGUI.BeginChangeCheck.html</span></span><br><span class=\"line\">    DrawProperties(materialEditor);</span><br><span class=\"line\">    <span class=\"comment\">// if (EditorGUI.EndChangeCheck()) SetMaterialKeywords(materialEditor.target as Material);</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">endregion</span></span></span><br></pre></td></tr></table></figure>\r\n<p>As we have archived the usability check in the <code>OnGUI</code>\r\nfunction, we just need to archive the <code>DrawProperties()</code>\r\nfunction and <code>GetFoldoutState()</code> function later.</p>\r\n<h4 id=\"archive-the-getfoldoutstate-function\">Archive the\r\n<code>GetFoldoutState</code> function</h4>\r\n<p>To archive the folder effects, we need to use the\r\n<code>EditorPrefs</code> Property to make the target variables a folder\r\nfirst. <a\r\nhref=\"https://docs.unity3d.com/ScriptReference/EditorPrefs.html\">Unity -\r\nScripting API: EditorPrefs (unity3d.com)</a></p>\r\n<figure class=\"highlight c#\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">region</span> EditorPrefs</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Because we</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"built_in\">bool</span> <span class=\"title\">GetFoldoutState</span>(<span class=\"params\"><span class=\"built_in\">string</span> name</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> EditorPrefs.GetBool(<span class=\"string\">$&quot;<span class=\"subst\">&#123;EditorPreKey&#125;</span>.<span class=\"subst\">&#123;name&#125;</span>&quot;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">SetFoldoutState</span>(<span class=\"params\"><span class=\"built_in\">string</span> name, <span class=\"built_in\">bool</span> field, <span class=\"built_in\">bool</span> <span class=\"keyword\">value</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (field == <span class=\"keyword\">value</span>) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    EditorPrefs.SetBool(<span class=\"string\">$&quot;<span class=\"subst\">&#123;EditorPreKey&#125;</span>.<span class=\"subst\">&#123;name&#125;</span>&quot;</span>, <span class=\"keyword\">value</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">endregion</span></span></span><br></pre></td></tr></table></figure>\r\n<h4 id=\"setup-the-foldout-render-function\">Setup the foldout render\r\nfunction</h4>\r\n<p>Finally, we will archive the function that can truly make effects in\r\nthe Inspector tab.</p>\r\n<p>Here, we need to define a startup function that controls all the\r\nfoldouts and then build different functions for every folder. It sounds\r\nlike a big project. But it is a simple job actually. <a\r\nhref=\"https://docs.unity3d.com/ScriptReference/EditorGUILayout.html\">Unity\r\n- Scripting API: EditorGUILayout (unity3d.com)</a> <a\r\nhref=\"https://docs.unity3d.com/ScriptReference/EditorGUILayout.BeginFoldoutHeaderGroup.html\">Unity\r\n- Scripting API: EditorGUILayout.BeginFoldoutHeaderGroup\r\n(unity3d.com)</a> <a\r\nhref=\"https://docs.unity3d.com/ScriptReference/EditorGUILayout.EndFoldoutHeaderGroup.html\">Unity\r\n- Scripting API: EditorGUILayout.EndFoldoutHeaderGroup\r\n(unity3d.com)</a></p>\r\n<figure class=\"highlight c#\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">region</span> Properties</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">DrawProperties</span>(<span class=\"params\">MaterialEditor materialEditor</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// the foldout setup here:</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> surfaceOptionsFold =</span><br><span class=\"line\">        EditorGUILayout.BeginFoldoutHeaderGroup(m_SurfaceOptionsFoldout, Styles.SurfaceOptionFold);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (surfaceOptionsFold) &#123;</span><br><span class=\"line\">        EditorGUILayout.Space();</span><br><span class=\"line\">        DrawSurfaceOption(materialEditor);</span><br><span class=\"line\">        EditorGUILayout.Space();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    SetFoldoutState(<span class=\"string\">&quot;SurfaceOptions&quot;</span>, m_SurfaceOptionsFoldout, surfaceOptionsFold);</span><br><span class=\"line\">    EditorGUILayout.EndFoldoutHeaderGroup();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">DrawSurfaceOption</span>(<span class=\"params\">MaterialEditor materialEditor</span>)</span> &#123;</span><br><span class=\"line\">    materialEditor.TexturePropertySingleLine(Styles.MainColor, m_MainTex, m_MainColor);</span><br><span class=\"line\"></span><br><span class=\"line\">    materialEditor.FloatProperty(m_Test, MPropertyNames.Test);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">endregion</span></span></span><br></pre></td></tr></table></figure>\r\n<h4 id=\"optional-setup-keywords\">[Optional] Setup keywords</h4>\r\n<p>Once we change the properties in the custom shader UI, we need to\r\nregenerate the corresponding shader variants. Here's an example.</p>\r\n<figure class=\"highlight c#\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">region</span> Keywords</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">SetKeyword</span>(<span class=\"params\">Material material, <span class=\"built_in\">string</span> keyword, <span class=\"built_in\">bool</span> <span class=\"keyword\">value</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">value</span>) material.EnableKeyword(keyword);</span><br><span class=\"line\">    <span class=\"keyword\">else</span> material.DisableKeyword(keyword);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">SetMaterialKeywords</span>(<span class=\"params\">Material material</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// https://docs.unity3d.com/ScriptReference/Material-shaderKeywords.html</span></span><br><span class=\"line\">    material.shaderKeywords = <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    SetKeyword(material, <span class=\"string\">&quot;_SPECULAR_SETUP&quot;</span>, material.GetFloat(MPropertyNames.Test) == <span class=\"number\">0</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">endregion</span></span></span><br></pre></td></tr></table></figure>\r\n<h3 id=\"a-complete-example-script\">A Complete Example Script</h3>\r\n<p>Find it on: <a\r\nhref=\"https://github.com/ChiliMilk/URP_Toon/blob/master/Assets/ChiliMilkToonShader/Editor/ToonShaderGUI.cs\">URP_Toon/ToonShaderGUI.cs\r\nat master · ChiliMilk/URP_Toon (github.com)</a></p>\r\n<h2 id=\"reference\">Reference</h2>\r\n<ul>\r\n<li><p>Blog:</p>\r\n<ul>\r\n<li><a\r\nhref=\"https://github.com/Straw1997/UnityCustomShaderGUI\">Straw1997/UnityCustomShaderGUI:\r\n自定义 Unity Shader GUI (github.com)</a></li>\r\n<li><a\r\nhref=\"https://forum.unity.com/threads/simplest-way-to-add-an-option-to-right-click-menu.424987/\">simplest\r\nway to add an option to right click menu - Unity Forum</a></li>\r\n<li><a href=\"https://www.runoob.com/csharp/csharp-enum.html\">C#\r\n枚举（Enum） | 菜鸟教程 (runoob.com)</a></li>\r\n<li><a\r\nhref=\"https://blog.csdn.net/candycat1992/article/details/51417965\">【Unity\r\nShader】自定义材质面板的小技巧<em>unity shader\r\nbool</em>妈妈说女孩子要自立自强的博客-CSDN 博客</a></li>\r\n<li><a href=\"https://zhuanlan.zhihu.com/p/93194054\">Shader\r\n面板上常用的一些内置枚举 UI - 知乎 (zhihu.com)</a></li>\r\n</ul></li>\r\n<li><p>Unity Manual</p>\r\n<ul>\r\n<li><a\r\nhref=\"https://docs.unity3d.com/Manual/shader-keywords-material-inspector.html\">Unity\r\n- Manual: Using shader keywords with the material Inspector\r\n(unity3d.com)</a></li>\r\n<li><a href=\"https://docs.unity3d.com/Manual/SL-CustomEditor.html\">Unity\r\n- Manual: ShaderLab: assigning a custom editor (unity3d.com)</a></li>\r\n<li><a\r\nhref=\"https://docs.unity3d.com/ScriptReference/ShaderGUI.OnGUI.html\">Unity\r\n- Scripting API: ShaderGUI.OnGUI (unity3d.com)</a></li>\r\n<li><a\r\nhref=\"https://docs.unity3d.com/ScriptReference/MaterialEditor.html\">Unity\r\n- Scripting API: MaterialEditor (unity3d.com)</a></li>\r\n<li><a\r\nhref=\"https://docs.unity3d.com/ScriptReference/MaterialProperty.html\">Unity\r\n- Scripting API: MaterialProperty (unity3d.com)</a></li>\r\n<li><a\r\nhref=\"https://docs.unity3d.com/ScriptReference/EditorGUI.html\">Unity -\r\nScripting API: EditorGUI (unity3d.com)</a></li>\r\n<li><a\r\nhref=\"https://docs.unity3d.com/ScriptReference/EditorGUI.BeginChangeCheck.html\">Unity\r\n- Scripting API: EditorGUI.BeginChangeCheck (unity3d.com)</a></li>\r\n<li><a\r\nhref=\"https://docs.unity3d.com/ScriptReference/EditorPrefs.html\">Unity -\r\nScripting API: EditorPrefs (unity3d.com)</a></li>\r\n<li><a\r\nhref=\"https://docs.unity3d.com/ScriptReference/EditorGUILayout.html\">Unity\r\n- Scripting API: EditorGUILayout (unity3d.com)</a></li>\r\n<li><a\r\nhref=\"https://docs.unity3d.com/ScriptReference/EditorGUILayout.BeginFoldoutHeaderGroup.html\">Unity\r\n- Scripting API: EditorGUILayout.BeginFoldoutHeaderGroup\r\n(unity3d.com)</a></li>\r\n<li><a\r\nhref=\"https://docs.unity3d.com/ScriptReference/EditorGUILayout.EndFoldoutHeaderGroup.html\">Unity\r\n- Scripting API: EditorGUILayout.EndFoldoutHeaderGroup\r\n(unity3d.com)</a></li>\r\n</ul></li>\r\n<li><p><a\r\nhref=\"https://github.com/ChiliMilk/URP_Toon/blob/master/Assets/ChiliMilkToonShader/Editor/ToonShaderGUI.cs\">URP_Toon/ToonShaderGUI.cs\r\nat master · ChiliMilk/URP_Toon (github.com)</a></p></li>\r\n</ul>\r\n","text":"Custom Right-Click Menu And Shader GUI All the operations in this project should be done in a folder named \"Editor\", no matter where this fo...","link":"","photos":[],"count_time":{"symbolsCount":"15k","symbolsTime":"14 mins."},"categories":[{"name":"Unity","slug":"Unity","count":17,"path":"api/categories/Unity.json"},{"name":"Shader","slug":"Unity/Shader","count":7,"path":"api/categories/Unity/Shader.json"}],"tags":[{"name":"Unity","slug":"Unity","count":17,"path":"api/tags/Unity.json"},{"name":"Shader","slug":"Shader","count":33,"path":"api/tags/Shader.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#custom-right-click-menu-and-shader-gui\"><span class=\"toc-text\">Custom Right-Click Menu\r\nAnd Shader GUI</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#what-do-we-want-to-do\"><span class=\"toc-text\">What do we want to do?</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#set-up-a-template-for-shader\"><span class=\"toc-text\">Set up a template for shader</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#custom-shader-and-its-tab\"><span class=\"toc-text\">Custom Shader And its Tab</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#define-the-shader-gui\"><span class=\"toc-text\">Define the Shader GUI</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#custom-shader-gui-though-scripts\"><span class=\"toc-text\">Custom Shader GUI Though\r\nScripts</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#setup-namespace\"><span class=\"toc-text\">Setup namespace:</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#declare-variables\"><span class=\"toc-text\">Declare variables</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#override-the-ongui-function\"><span class=\"toc-text\">Override the OnGUI\r\nfunction:</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#archive-the-getfoldoutstate-function\"><span class=\"toc-text\">Archive the\r\nGetFoldoutState function</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#setup-the-foldout-render-function\"><span class=\"toc-text\">Setup the foldout render\r\nfunction</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#optional-setup-keywords\"><span class=\"toc-text\">[Optional] Setup keywords</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#a-complete-example-script\"><span class=\"toc-text\">A Complete Example Script</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#reference\"><span class=\"toc-text\">Reference</span></a></li></ol></li></ol>","author":{"name":"JBR_Bunjie","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/90251718?v=4","link":"/","description":"仿生程序员会在光环上遇见AI乐正绫吗？","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili-fill.svg","link":"https://space.bilibili.com/415377461"},"github":{"icon":"/svg/social_github.svg","link":"https://github.com/JBR-Bunjie"}}}},"mapped":true,"prev_post":{"title":"Mapcap","uid":"e381c275e6062a6db30ed6f89e560299","slug":"Rendering/Mapcap","date":"2023-04-29T04:23:23.000Z","updated":"2023-10-27T20:19:51.000Z","comments":true,"path":"api/articles/Rendering/Mapcap.json","keywords":null,"cover":"https://raw.githubusercontent.com/JBR-Bunjie/JBR-Bunjie/main/back.jpg","text":"What is Mapcap? MatCap is a method of light expression using pre-rendered images. This technique uses a picture of a sphere that represents ...","link":"","photos":[],"count_time":{"symbolsCount":"2.2k","symbolsTime":"2 mins."},"categories":[{"name":"Unity","slug":"Unity","count":17,"path":"api/categories/Unity.json"},{"name":"Shader","slug":"Unity/Shader","count":7,"path":"api/categories/Unity/Shader.json"}],"tags":[{"name":"Unity","slug":"Unity","count":17,"path":"api/tags/Unity.json"},{"name":"Shader","slug":"Shader","count":33,"path":"api/tags/Shader.json"}],"author":{"name":"JBR_Bunjie","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/90251718?v=4","link":"/","description":"仿生程序员会在光环上遇见AI乐正绫吗？","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili-fill.svg","link":"https://space.bilibili.com/415377461"},"github":{"icon":"/svg/social_github.svg","link":"https://github.com/JBR-Bunjie"}}}}},"next_post":{"title":"URP源码分析","uid":"23661fa8ae25c981d575d8f076eed3e1","slug":"Rendering/UpdateToURPPipeline/URPSourceCode","date":"2023-04-08T13:32:05.000Z","updated":"2023-10-27T20:19:19.000Z","comments":true,"path":"api/articles/Rendering/UpdateToURPPipeline/URPSourceCode.json","keywords":null,"cover":"https://raw.githubusercontent.com/JBR-Bunjie/JBR-Bunjie/main/back.jpg","text":"URP源码分析 依赖信息： Editor版本：2021.21f1 LTS Shader版本：URP 12.1.10 URP Package总览 首先，当我们下载URP资源时，我们的项目的Package中会出现这些内容： URP资源结构 - com.unity.render-pip...","link":"","photos":[],"count_time":{"symbolsCount":"5.1k","symbolsTime":"5 mins."},"categories":[{"name":"Unity","slug":"Unity","count":17,"path":"api/categories/Unity.json"}],"tags":[{"name":"Unity","slug":"Unity","count":17,"path":"api/tags/Unity.json"},{"name":"Shader","slug":"Shader","count":33,"path":"api/tags/Shader.json"},{"name":"URP","slug":"URP","count":1,"path":"api/tags/URP.json"}],"author":{"name":"JBR_Bunjie","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/90251718?v=4","link":"/","description":"仿生程序员会在光环上遇见AI乐正绫吗？","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili-fill.svg","link":"https://space.bilibili.com/415377461"},"github":{"icon":"/svg/social_github.svg","link":"https://github.com/JBR-Bunjie"}}}}}}