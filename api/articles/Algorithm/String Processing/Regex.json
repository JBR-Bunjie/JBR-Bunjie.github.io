{"title":"Regex","uid":"fa3249ce619228ad8d74e7a819afc946","slug":"Algorithm/String Processing/Regex","date":"2023-03-08T02:22:54.000Z","updated":"2023-10-27T19:55:50.000Z","comments":true,"path":"api/articles/Algorithm/String Processing/Regex.json","keywords":null,"cover":"https://raw.githubusercontent.com/JBR-Bunjie/JBR-Bunjie/main/back.jpg","content":"<h1 id=\"regex\">Regex</h1>\r\n<h2 id=\"正则运用\">正则运用</h2>\r\n<p>当你使用多个捕获组时，请务必小心NULL！这是某个捕获组未能捕获任何内容的结果！</p>\r\n<p>验证：是否有bug</p>\r\n<p><a href=\"https://tool.oschina.net/regex/\">在线正则表达式测试 中文\r\n(oschina.net)</a></p>\r\n<p><a href=\"https://regex101.com/\">在线正则验证 英文 regex101: build,\r\ntest, and debug regex</a></p>\r\n<p><a\r\nhref=\"https://regexper.com/\">在线验证正则表达式结构：Regexper</a></p>\r\n<p><a\r\nhref=\"https://www.cplusplus.com/reference/regex/regex_match/\">regex_match\r\n- C++ Reference (cplusplus.com)</a></p>\r\n<p><a\r\nhref=\"https://changkun.de/modern-cpp/zh-cn/06-regex/index.html#6-2-std-regex-及其相关\">第\r\n6 章 正则表达式 现代 C++ 教程: 高速上手 C++ 11/14/17/20 - Modern C++\r\nTutorial: C++ 11/14/17/20 On the Fly (changkun.de)</a></p>\r\n<p><a\r\nhref=\"https://www.bing.com/search?q=c%2b%2b+正则表达式+高性能&amp;qs=SC&amp;pq=c%2b%2b正则表达式+&amp;sc=3-9&amp;cvid=03D982A0A5084F17BB42132E2F94B06F&amp;FORM=QBRE&amp;sp=1\">c++\r\n正则表达式 高性能 - Bing</a></p>\r\n<p><a\r\nhref=\"https://www.bing.com/search?q=c%2B%2B+locale&amp;qs=n&amp;form=QBRE&amp;sp=-1&amp;pq=c%2Blocale&amp;sc=0-8&amp;sk=&amp;cvid=913DBECC60374D3F965B8F9271271682\">c++\r\nlocale - Bing</a></p>\r\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[‐\\-a-zA-Z0-9\\.]+</span><br></pre></td></tr></table></figure>\r\n<h2 id=\"正则提速\">正则提速</h2>\r\n<ol type=\"1\">\r\n<li><p>让匹配更快失败，尤其是匹配很长的字符串时，匹配失败的位置要比成功的位置多得多。</p></li>\r\n<li><p>以简单、必须的字元开始，排除明显不匹配的位置，如锚点(^或$)，特殊字符(x或63A)字符类([a-z]或)，和单词边界(；尽量避免使用分组、选择、重复量词开头，如/one|two/、、等。</p></li>\r\n<li><p>使用量词模式时，尽量让重复部分具体化，让字元互斥，如用”[^\"\\r\\n]<em>”代替”.</em>?”（这个依赖回溯）。</p></li>\r\n<li><p>减少分支数量、缩小分支范围，用字符集和选项组件来减少分支的出现，或把分支在正则上出现的位置推后，把分支中最常出现的情况放在分支的最前面。</p>\r\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat|bat -&gt; [cb]at;red|read -&gt; rea?d;red|raw -&gt; r(?:ed|aw); </span><br><span class=\"line\"></span><br><span class=\"line\">(.|\\r|\\n) -&gt; [\\s\\S]</span><br></pre></td></tr></table></figure></li>\r\n<li><p>精确匹配需要的文本以减少后续的处理，如果需要引用匹配的一部分，可使用捕获，然后通过反向引用来处理。</p></li>\r\n<li><p>暴露必需的字元，用<code>/^(ab|cd)/</code>而不是<code>/(^ab|^cd)/</code>。</p></li>\r\n<li><p>使用合适的量词，基于预期的回溯数量，使用合适的量词类型。</p></li>\r\n<li><p>把正则表达式赋值给变量以便复用和提升提升性能，这样可以让正则减少不必要的编译过程。while\r\n(/regex1/.test(str1)) {/regex2/.exec(str2);…}用下面的代替上面的 var\r\nregex1 = /regex1/,regex2 = /regex2/;while (regex1.test(str1))\r\n{regex2.exec(str2);…}</p></li>\r\n<li><p>将复杂的正则表达式拆分成简单的片段，每个正则只在上一个成功的匹配中查找，更高效，而且可以减少回溯。</p></li>\r\n<li><p>使用非捕获组，因为捕获组需要消耗时间和内存来记录反向引用，并不断更新，如果不需要反向引用，可用非捕获组(?:…)代替捕获组(…)；当需要全文匹配的反向引用时，可用regex.exec()返回的结果或者在替换字符串是使用$&amp;。\r\n此优化在firefox中效果较小，但其他浏览器中处理长字符串时有较大影响</p></li>\r\n</ol>\r\n<p>And More？</p>\r\n<p><a\r\nhref=\"https://zhuanlan.zhihu.com/p/47401769\">觉得正则表达式太慢？这里有一个提速100倍的方案！\r\n- 知乎 (zhihu.com)</a></p>\r\n<p>项目地址</p>\r\n<p><a href=\"https://github.com/vi3k6i5/flashtext\">vi3k6i5/flashtext:\r\nExtract Keywords from sentence or Replace keywords in sentences.\r\n(github.com)</a></p>\r\n","text":"Regex 正则运用 当你使用多个捕获组时，请务必小心NULL！这是某个捕获组未能捕获任何内容的结果！ 验证：是否有bug 在线正则表达式测试 中文 (oschina.net) 在线正则验证 英文 regex101: build, test, and debug regex 在线...","link":"","photos":[],"count_time":{"symbolsCount":"1.4k","symbolsTime":"1 mins."},"categories":[{"name":"Algorithm","slug":"Algorithm","count":31,"path":"api/categories/Algorithm.json"}],"tags":[{"name":"Algorithm","slug":"Algorithm","count":31,"path":"api/tags/Algorithm.json"},{"name":"String Processing","slug":"String-Processing","count":5,"path":"api/tags/String-Processing.json"},{"name":"Regex","slug":"Regex","count":1,"path":"api/tags/Regex.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#regex\"><span class=\"toc-text\">Regex</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%AD%A3%E5%88%99%E8%BF%90%E7%94%A8\"><span class=\"toc-text\">正则运用</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%AD%A3%E5%88%99%E6%8F%90%E9%80%9F\"><span class=\"toc-text\">正则提速</span></a></li></ol></li></ol>","author":{"name":"JBR_Bunjie","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/90251718?v=4","link":"/","description":"仿生程序员会在光环上遇见AI乐正绫吗？","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili-fill.svg","link":"https://space.bilibili.com/415377461"},"github":{"icon":"/svg/social_github.svg","link":"https://github.com/JBR-Bunjie"}}}},"mapped":true,"prev_post":{"title":"learningOpenGl Chapter 1.4","uid":"4fc32846a71333fda5c166e6a4c0c980","slug":"Language Learning/Opengl/learnopengl-cn.readthedocs.io/01GettingStarted/03.Hello Triangle","date":"2023-03-08T02:23:08.000Z","updated":"2023-10-27T19:52:22.000Z","comments":true,"path":"api/articles/Language Learning/Opengl/learnopengl-cn.readthedocs.io/01GettingStarted/03.Hello Triangle.json","keywords":null,"cover":"https://raw.githubusercontent.com/JBR-Bunjie/JBR-Bunjie/main/back.jpg","text":"1.4 绘制三角形 在OpenGL中，任何事物都在3D空间中，而屏幕和窗口却是2D像素数组，这导致OpenGL的大部分工作都是关于把3D坐标转变为适应你屏幕的2D像素。 3D坐标转为2D坐标的处理过程是由OpenGL的图形渲染管线（Graphics Pipeline，大多译为管线...","link":"","photos":[],"count_time":{"symbolsCount":"11k","symbolsTime":"10 mins."},"categories":[{"name":"Opengl","slug":"Opengl","count":16,"path":"api/categories/Opengl.json"},{"name":"Shader","slug":"Opengl/Shader","count":16,"path":"api/categories/Opengl/Shader.json"}],"tags":[{"name":"Shader","slug":"Shader","count":33,"path":"api/tags/Shader.json"},{"name":"Opengl","slug":"Opengl","count":16,"path":"api/tags/Opengl.json"}],"author":{"name":"JBR_Bunjie","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/90251718?v=4","link":"/","description":"仿生程序员会在光环上遇见AI乐正绫吗？","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili-fill.svg","link":"https://space.bilibili.com/415377461"},"github":{"icon":"/svg/social_github.svg","link":"https://github.com/JBR-Bunjie"}}}}},"next_post":{"title":"learningOpenGl Chapter 1.3","uid":"840d5a833aff18f2fbd4e2e8f83d93a6","slug":"Language Learning/Opengl/learnopengl-cn.readthedocs.io/01GettingStarted/02.Hello Window","date":"2023-03-08T02:22:08.000Z","updated":"2023-10-27T19:52:19.000Z","comments":true,"path":"api/articles/Language Learning/Opengl/learnopengl-cn.readthedocs.io/01GettingStarted/02.Hello Window.json","keywords":null,"cover":"https://raw.githubusercontent.com/JBR-Bunjie/JBR-Bunjie/main/back.jpg","text":"1.3 你好，窗口 1.3.1 引入库，并作基本初始化 Let's see if we can get GLFW up and running. First, create a .cpp file and add the following includes to the top...","link":"","photos":[],"count_time":{"symbolsCount":"9k","symbolsTime":"8 mins."},"categories":[{"name":"Opengl","slug":"Opengl","count":16,"path":"api/categories/Opengl.json"},{"name":"Shader","slug":"Opengl/Shader","count":16,"path":"api/categories/Opengl/Shader.json"}],"tags":[{"name":"Shader","slug":"Shader","count":33,"path":"api/tags/Shader.json"},{"name":"Opengl","slug":"Opengl","count":16,"path":"api/tags/Opengl.json"}],"author":{"name":"JBR_Bunjie","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/90251718?v=4","link":"/","description":"仿生程序员会在光环上遇见AI乐正绫吗？","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili-fill.svg","link":"https://space.bilibili.com/415377461"},"github":{"icon":"/svg/social_github.svg","link":"https://github.com/JBR-Bunjie"}}}}}}