{"title":"Regex","uid":"fa3249ce619228ad8d74e7a819afc946","slug":"Algorithm/String Processing/Regex","date":"2023-03-08T02:22:54.000Z","updated":"2023-03-08T02:23:23.000Z","comments":true,"path":"api/articles/Algorithm/String Processing/Regex.json","keywords":null,"cover":"https://raw.githubusercontent.com/JBR-Bunjie/JBR-Bunjie/main/back.jpg","content":"<h1 id=\"Regex\"><a href=\"#Regex\" class=\"headerlink\" title=\"Regex\"></a>Regex</h1><h2 id=\"正则运用\"><a href=\"#正则运用\" class=\"headerlink\" title=\"正则运用\"></a>正则运用</h2><p>当你使用多个捕获组时，请务必小心NULL！这是某个捕获组未能捕获任何内容的结果！</p>\n<p>验证：是否有bug</p>\n<p><a href=\"https://tool.oschina.net/regex/\">在线正则表达式测试 中文 (oschina.net)</a></p>\n<p><a href=\"https://regex101.com/\">在线正则验证 英文 regex101: build, test, and debug regex</a></p>\n<p><a href=\"https://regexper.com/\">在线验证正则表达式结构：Regexper</a></p>\n<p><a href=\"https://www.cplusplus.com/reference/regex/regex_match/\">regex_match - C++ Reference (cplusplus.com)</a></p>\n<p><a href=\"https://changkun.de/modern-cpp/zh-cn/06-regex/index.html#6-2-std-regex-%E5%8F%8A%E5%85%B6%E7%9B%B8%E5%85%B3\">第 6 章 正则表达式 现代 C++ 教程: 高速上手 C++ 11/14/17/20 - Modern C++ Tutorial: C++ 11/14/17/20 On the Fly (changkun.de)</a></p>\n<p><a href=\"https://www.bing.com/search?q=c+++%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F+%E9%AB%98%E6%80%A7%E8%83%BD&qs=SC&pq=c++%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F+&sc=3-9&cvid=03D982A0A5084F17BB42132E2F94B06F&FORM=QBRE&sp=1\">c++ 正则表达式 高性能 - Bing</a></p>\n<p><a href=\"https://www.bing.com/search?q=c+++locale&qs=n&form=QBRE&sp=-1&pq=c+locale&sc=0-8&sk=&cvid=913DBECC60374D3F965B8F9271271682\">c++ locale - Bing</a></p>\n<p>（为什么Fuck Locale）</p>\n<pre class=\"line-numbers language-regex\" data-language=\"regex\"><code class=\"language-regex\">[‐\\-a-zA-Z0-9\\.]+</code></pre>\n\n<h2 id=\"正则提速\"><a href=\"#正则提速\" class=\"headerlink\" title=\"正则提速\"></a>正则提速</h2><ol>\n<li><p>让匹配更快失败，尤其是匹配很长的字符串时，匹配失败的位置要比成功的位置多得多。</p>\n</li>\n<li><p>以简单、必须的字元开始，排除明显不匹配的位置，如锚点(^或$)，特殊字符(x或\\u263A)字符类([a-z]或\\d之类的速记符)，和单词边界(\\b)；尽量避免使用分组、选择、重复量词开头，如/one|two/、\\s、\\s{1,}等。</p>\n</li>\n<li><p>使用量词模式时，尽量让重复部分具体化，让字元互斥，如用”[^”\\r\\n]<em>”代替”.</em>?”（这个依赖回溯）。</p>\n</li>\n<li><p>减少分支数量、缩小分支范围，用字符集和选项组件来减少分支的出现，或把分支在正则上出现的位置推后，把分支中最常出现的情况放在分支的最前面。</p>\n<pre class=\"line-numbers language-regex\" data-language=\"regex\"><code class=\"language-regex\">cat|bat -&gt; [cb]at;red|read -&gt; rea?d;red|raw -&gt; r(?:ed|aw); \n\n(.|\\r|\\n) -&gt; [\\s\\S]</code></pre></li>\n<li><p>精确匹配需要的文本以减少后续的处理，如果需要引用匹配的一部分，可使用捕获，然后通过反向引用来处理。</p>\n</li>\n<li><p>暴露必需的字元，用<code>/^(ab|cd)/</code>而不是<code>/(^ab|^cd)/</code>。</p>\n</li>\n<li><p>使用合适的量词，基于预期的回溯数量，使用合适的量词类型。</p>\n</li>\n<li><p>把正则表达式赋值给变量以便复用和提升提升性能，这样可以让正则减少不必要的编译过程。while (/regex1/.test(str1)) {/regex2/.exec(str2);…}用下面的代替上面的   var regex1 = /regex1/,regex2 = /regex2/;while (regex1.test(str1)) {regex2.exec(str2);…}</p>\n</li>\n<li><p>将复杂的正则表达式拆分成简单的片段，每个正则只在上一个成功的匹配中查找，更高效，而且可以减少回溯。</p>\n</li>\n<li><p>使用非捕获组，因为捕获组需要消耗时间和内存来记录反向引用，并不断更新，如果不需要反向引用，可用非捕获组(?:…)代替捕获组(…)；当需要全文匹配的反向引用时，可用regex.exec()返回的结果或者在替换字符串是使用$&amp;。   此优化在firefox中效果较小，但其他浏览器中处理长字符串时有较大影响</p>\n</li>\n</ol>\n<p>And More？</p>\n<p><a href=\"https://zhuanlan.zhihu.com/p/47401769\">觉得正则表达式太慢？这里有一个提速100倍的方案！ - 知乎 (zhihu.com)</a></p>\n<p>项目地址</p>\n<p><a href=\"https://github.com/vi3k6i5/flashtext\">vi3k6i5/flashtext: Extract Keywords from sentence or Replace keywords in sentences. (github.com)</a></p>\n","text":"Regex正则运用当你使用多个捕获组时，请务必小心NULL！这是某个捕获组未能捕获任何内容的结果！ 验证：是否有bug 在线正则表达式测试 中文 (oschina.net) 在线正则验证 英文 regex101: build, test, and debug regex 在线验证...","link":"","photos":[],"count_time":{"symbolsCount":"1.4k","symbolsTime":"1 mins."},"categories":[{"name":"Algorithm","slug":"Algorithm","count":26,"path":"api/categories/Algorithm.json"}],"tags":[{"name":"String Processing","slug":"String-Processing","count":7,"path":"api/tags/String-Processing.json"},{"name":"Regex","slug":"Regex","count":1,"path":"api/tags/Regex.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Regex\"><span class=\"toc-text\">Regex</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%AD%A3%E5%88%99%E8%BF%90%E7%94%A8\"><span class=\"toc-text\">正则运用</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%AD%A3%E5%88%99%E6%8F%90%E9%80%9F\"><span class=\"toc-text\">正则提速</span></a></li></ol></li></ol>","author":{"name":"JBR_Bunjie","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/90251718?v=4","link":"/","description":"仿生程序员会在光环上遇见AI乐正绫吗？","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili-fill.svg","link":"https://space.bilibili.com/415377461"},"github":{"icon":"/svg/social_github.svg","link":"https://github.com/JBR-Bunjie"}}}},"mapped":true,"prev_post":{},"next_post":{"title":"learningOpenGl 0","uid":"d309579445aab8e475b1a200f76bbffc","slug":"Technical Artist/Opengl/learnopengl-cn.readthedocs.io/ReadMe","date":"2023-03-08T02:21:08.000Z","updated":"2023-03-08T02:29:11.000Z","comments":true,"path":"api/articles/Technical Artist/Opengl/learnopengl-cn.readthedocs.io/ReadMe.json","keywords":null,"cover":"https://raw.githubusercontent.com/JBR-Bunjie/JBR-Bunjie/main/back.jpg","text":"OpenGL学习记录这份笔记对应的教程来自网站：LearnOpenGL-CN，是Learn OpenGL, extensive tutorial resource for learning Modern OpenGL的早期译文 同时辅以视频教程： [傅老師/OpenGL教學 第一...","link":"","photos":[],"count_time":{"symbolsCount":387,"symbolsTime":"1 mins."},"categories":[{"name":"TA","slug":"TA","count":14,"path":"api/categories/TA.json"}],"tags":[{"name":"Opengl","slug":"Opengl","count":14,"path":"api/tags/Opengl.json"},{"name":"Shader","slug":"Shader","count":14,"path":"api/tags/Shader.json"}],"author":{"name":"JBR_Bunjie","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/90251718?v=4","link":"/","description":"仿生程序员会在光环上遇见AI乐正绫吗？","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili-fill.svg","link":"https://space.bilibili.com/415377461"},"github":{"icon":"/svg/social_github.svg","link":"https://github.com/JBR-Bunjie"}}}}}}