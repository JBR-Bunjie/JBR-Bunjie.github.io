{"title":"日志格式","uid":"743056c4369a9fa1f8f105370c847ec2","slug":"Dev/Theory/日志规范","date":"2022-12-23T04:23:23.000Z","updated":"2023-10-27T19:43:25.000Z","comments":true,"path":"api/articles/Dev/Theory/日志规范.json","keywords":null,"cover":"https://raw.githubusercontent.com/JBR-Bunjie/JBR-Bunjie/main/back.jpg","content":"<h1 id=\"日志格式\"><a href=\"#日志格式\" class=\"headerlink\" title=\"日志格式\"></a>日志格式</h1><p>通用前缀 class.method LEVEL | KEY | SUB_KEY | param1&#x3D;x;param2&#x3D;x;… | rs&#x3D;JSON | traceId&#x3D;xxx[ | 其它自定义日志]</p>\n<p>KEY：标示业务领域，如“领券”</p>\n<p>SUBKEY：标示业务领域中具体的逻辑，如“策略决策”、“权益决策”、“调用 UMP”等</p>\n<p><strong>LEVEL：DEBUG &#x2F; TRACE &#x2F; MONITOR &#x2F; WARN</strong></p>\n<h2 id=\"要求：\"><a href=\"#要求：\" class=\"headerlink\" title=\"要求：\"></a>要求：</h2><p>查找日志时，再一次查询中可以顺利通过一个或多个关键字的组合，找到一条完整的业务处理链路。</p>\n<p>如通过一个 userId 和 KEY，可以完整的找到这个用户的领券全过程。</p>\n<h2 id=\"调试日志\"><a href=\"#调试日志\" class=\"headerlink\" title=\"调试日志\"></a>调试日志</h2><p>仅在调试阶段需要输出，线上一般不输出。</p>\n<p>日志可以包括每次请求的详细出入参等信息。</p>\n<p>线上必须有开关可以控制这类日志的打印。</p>\n<p>level&#x3D;DEBUG</p>\n<h2 id=\"普通日志\"><a href=\"#普通日志\" class=\"headerlink\" title=\"普通日志\"></a>普通日志</h2><p>用户追踪必要的代码执行记录，线上一般打印出来，大促时可以降级。</p>\n<p>日志可以包括每次外部请求的详细出入参，以及内部请求的关键参数。</p>\n<p>请求出入参较长时，可考虑只打印关键参数。</p>\n<p>level&#x3D;TRACE</p>\n<h2 id=\"业务指标项日志\"><a href=\"#业务指标项日志\" class=\"headerlink\" title=\"业务指标项日志\"></a>业务指标项日志</h2><p>记录必要的业务活动，通过 sls 或 sunfire 产出业务大盘</p>\n<p>level&#x3D;MONITOR</p>\n<h2 id=\"监控报警项日志\"><a href=\"#监控报警项日志\" class=\"headerlink\" title=\"监控报警项日志\"></a>监控报警项日志</h2><p>通过 sunfire 产出报警</p>\n<p>level&#x3D;WARN</p>\n<h2 id=\"自定义日志\"><a href=\"#自定义日志\" class=\"headerlink\" title=\"自定义日志\"></a>自定义日志</h2><p>不做格式要求，自行打印，注意避免过量日志造成线上磁盘资源紧张</p>\n","text":"日志格式通用前缀 class.method LEVEL | KEY | SUB_KEY | param1&#x3D;x;param2&#x3D;x;… | rs&#x3D;JSON | traceId&#x3D;xxx[ | 其它自定义日志] KEY：标示业务领域，如“领券” S...","link":"","photos":[],"count_time":{"symbolsCount":645,"symbolsTime":"1 mins."},"categories":[{"name":"Theroy","slug":"Theroy","count":5,"path":"api/categories/Theroy.json"}],"tags":[{"name":"Theroy","slug":"Theroy","count":5,"path":"api/tags/Theroy.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E6%97%A5%E5%BF%97%E6%A0%BC%E5%BC%8F\"><span class=\"toc-text\">日志格式</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%A6%81%E6%B1%82%EF%BC%9A\"><span class=\"toc-text\">要求：</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%B0%83%E8%AF%95%E6%97%A5%E5%BF%97\"><span class=\"toc-text\">调试日志</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%99%AE%E9%80%9A%E6%97%A5%E5%BF%97\"><span class=\"toc-text\">普通日志</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%9A%E5%8A%A1%E6%8C%87%E6%A0%87%E9%A1%B9%E6%97%A5%E5%BF%97\"><span class=\"toc-text\">业务指标项日志</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%9B%91%E6%8E%A7%E6%8A%A5%E8%AD%A6%E9%A1%B9%E6%97%A5%E5%BF%97\"><span class=\"toc-text\">监控报警项日志</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%97%A5%E5%BF%97\"><span class=\"toc-text\">自定义日志</span></a></li></ol></li></ol>","author":{"name":"JBR_Bunjie","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/90251718?v=4","link":"/","description":"仿生程序员会在光环上遇见AI乐正绫吗？","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili-fill.svg","link":"https://space.bilibili.com/415377461"},"github":{"icon":"/svg/social_github.svg","link":"https://github.com/JBR-Bunjie"}}}},"mapped":true,"prev_post":{"title":"CatlikeCoding - Chapter01. Basics","uid":"b3bedba617b3d9cc8e9599d09276fd70","slug":"Rendering/CatLikePrograming/Chapter01","date":"2022-12-23T04:23:23.000Z","updated":"2023-10-27T20:22:16.000Z","comments":true,"path":"api/articles/Rendering/CatLikePrograming/Chapter01.json","keywords":null,"cover":"https://raw.githubusercontent.com/JBR-Bunjie/JBR-Bunjie/main/back.jpg","text":"Chapter01：Basics 对于基础部分，除了这些内容外，仅记录了有用的 QA 内容： Game Objects and Scripts 1. Which Unity versions are appropriate? …A further f1 suffix indica...","link":"","photos":[],"count_time":{"symbolsCount":"7.9k","symbolsTime":"7 mins."},"categories":[{"name":"CatlikeCoding","slug":"CatlikeCoding","count":1,"path":"api/categories/CatlikeCoding.json"},{"name":"Rendering","slug":"CatlikeCoding/Rendering","count":1,"path":"api/categories/CatlikeCoding/Rendering.json"}],"tags":[{"name":"Rendering","slug":"Rendering","count":3,"path":"api/tags/Rendering.json"},{"name":"CatlikeCoding","slug":"CatlikeCoding","count":1,"path":"api/tags/CatlikeCoding.json"}],"author":{"name":"JBR_Bunjie","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/90251718?v=4","link":"/","description":"仿生程序员会在光环上遇见AI乐正绫吗？","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili-fill.svg","link":"https://space.bilibili.com/415377461"},"github":{"icon":"/svg/social_github.svg","link":"https://github.com/JBR-Bunjie"}}}}},"next_post":{"title":"Prim’s Minimum Spanning Tree","uid":"b14408b92d0c8809e1d3bbbaabf2879c","slug":"Algorithm/Prim/Prim","date":"2022-12-22T04:23:23.000Z","updated":"2023-11-01T04:26:30.212Z","comments":true,"path":"api/articles/Algorithm/Prim/Prim.json","keywords":null,"cover":"https://raw.githubusercontent.com/JBR-Bunjie/JBR-Bunjie/main/back.jpg","text":" Prim 算法(Python 实现)_JohnJim 的博客-CSDN 博客_prim 算法 python ","link":"","photos":[],"count_time":{"symbolsCount":56,"symbolsTime":"1 mins."},"categories":[{"name":"Algorithm","slug":"Algorithm","count":31,"path":"api/categories/Algorithm.json"}],"tags":[{"name":"Algorithm","slug":"Algorithm","count":31,"path":"api/tags/Algorithm.json"},{"name":"MST","slug":"MST","count":1,"path":"api/tags/MST.json"}],"author":{"name":"JBR_Bunjie","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/90251718?v=4","link":"/","description":"仿生程序员会在光环上遇见AI乐正绫吗？","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili-fill.svg","link":"https://space.bilibili.com/415377461"},"github":{"icon":"/svg/social_github.svg","link":"https://github.com/JBR-Bunjie"}}}}}}