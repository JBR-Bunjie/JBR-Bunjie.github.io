{"title":"","uid":"f73a8e23e6f6f669cf99c7dba8fa0722","slug":"Web Dev/Front End/VUE/父子组件交互","date":"2023-03-07T16:14:46.450Z","updated":"2021-11-04T14:34:53.000Z","comments":true,"path":"api/articles/Web Dev/Front End/VUE/父子组件交互.json","keywords":null,"cover":[],"content":"<h1 id=\"vue父子组件之间的传值\"><a href=\"#vue父子组件之间的传值\" class=\"headerlink\" title=\"vue父子组件之间的传值\"></a>vue父子组件之间的传值</h1><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>本章主要说下父子组件的传值。<br> Github：<a href=\"https://links.jianshu.com/go?to=https://github.com/Ewall1106/mall\">https://github.com/Ewall1106/mall</a></p></blockquote>\n<h2 id=\"父组件向子组件传值\"><a href=\"#父组件向子组件传值\" class=\"headerlink\" title=\"父组件向子组件传值\"></a>父组件向子组件传值</h2><ul>\n<li>第一个就是要明白怎么在父页面中向子组件中传值？你可以给子组件传入一个静态的值：</li>\n</ul>\n<p><img src=\"https://upload-images.jianshu.io/upload_images/2891127-60092a004be0dbba.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/602\" alt=\"img\"></p>\n<p>图片来自vue官网</p>\n<ul>\n<li>但我们一般都是需要传动态的值，所以需要<code>v-bind</code>绑定，当然，你传的值可以是数字、对象、数组等等，<a href=\"https://links.jianshu.com/go?to=https://cn.vuejs.org/v2/guide/components-props.html\">参见vue官网</a>。</li>\n</ul>\n<p><img src=\"https://upload-images.jianshu.io/upload_images/2891127-aaf51402e79ff193.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/599\" alt=\"img\"></p>\n<p>图片来自vue官网</p>\n<ul>\n<li>第二个就是要知道如何在子组件中接受父页面传过来的值，有几点需要了解：<ul>\n<li>组件实例的作用域是孤立的。</li>\n<li>子组件要显式的用<code>props</code>选项声明它预期的数据，如：</li>\n</ul>\n</li>\n</ul>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\">&#x2F;&#x2F; 某个子组件中：\nexport default &#123;\n  props: &#123;\n    title: &#123;\n      type: String,\n      default: &#39;hello world&#39;\n    &#125;\n  &#125;\n&#125;</code></pre>\n\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>以上就是<code>单向数据流</code>的一般表现了： 父级 prop 的更新会向下流动到子组件中，但是反过来则不行。</p></blockquote>\n<h2 id=\"子组件向父组件传值\"><a href=\"#子组件向父组件传值\" class=\"headerlink\" title=\"子组件向父组件传值\"></a>子组件向父组件传值</h2><p>那么我们延伸一下，子组件怎么向父组件传值？</p>\n<h3 id=\"1-基本概念\"><a href=\"#1-基本概念\" class=\"headerlink\" title=\"1. 基本概念\"></a>1. 基本概念</h3><ul>\n<li>在vue中，父子组件的关系可以总结为<code>prop</code>向下传递，<code>事件</code>向上传递。父组件通过<code>prop</code>给子组件下发数据，子组件通过<code>事件</code>给父组件发送信息。</li>\n</ul>\n<p><img src=\"https://upload-images.jianshu.io/upload_images/2891127-591b88f49fb05f19.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/246\" alt=\"img\"></p>\n<p>props down , events up</p>\n<ul>\n<li>每个Vue实例都实现了事件接口：使用<code>$on(evntName)</code>监听事件；使用<code>$emit(eventName,optionalPayload)</code>触发事件。另外，父组件可以在使用子组件的地方直接用<code>v-on</code>来监听子组件触发的事件。</li>\n</ul>\n<h3 id=\"2-举例说明\"><a href=\"#2-举例说明\" class=\"headerlink\" title=\"2. 举例说明\"></a>2. 举例说明</h3><ul>\n<li>父组件在组件上定义了一个自定义事件<code>childFn</code>，事件名为<code>parentFn</code>用于接受子组件传过来的<code>message</code>值。</li>\n</ul>\n<pre class=\"line-numbers language-xml\" data-language=\"xml\"><code class=\"language-xml\">&lt;!-- 父组件 --&gt;\n&lt;template&gt;\n    &lt;div class&#x3D;&quot;test&quot;&gt;\n      &lt;test-com @childFn&#x3D;&quot;parentFn&quot;&gt;&lt;&#x2F;test-com&gt;\n      &lt;br&#x2F;&gt; \n      子组件传来的值 : &#123;&#123;message&#125;&#125;\n    &lt;&#x2F;div&gt;\n&lt;&#x2F;template&gt;\n\n&lt;script&gt;\nexport default &#123;\n    &#x2F;&#x2F; ...\n    data() &#123;\n        return &#123;\n             message: &#39;&#39;\n        &#125;\n    &#125;,\n    methods: &#123;\n       parentFn(payload) &#123;\n        this.message &#x3D; payload;\n      &#125;\n    &#125;\n&#125;\n&lt;&#x2F;script&gt;</code></pre>\n\n<ul>\n<li>子组件是一个<code>buttton</code>按钮，并为其添加了一个<code>click</code>事件，当点击的时候使用<code>$emit()</code>触发事件，把<code>message</code>传给父组件。</li>\n</ul>\n<pre class=\"line-numbers language-xml\" data-language=\"xml\"><code class=\"language-xml\">&lt;!-- 子组件 --&gt;\n&lt;template&gt; \n&lt;div class&#x3D;&quot;testCom&quot;&gt;\n    &lt;input type&#x3D;&quot;text&quot; v-model&#x3D;&quot;message&quot; &#x2F;&gt;\n    &lt;button @click&#x3D;&quot;click&quot;&gt;Send&lt;&#x2F;button&gt;\n&lt;&#x2F;div&gt;\n&lt;&#x2F;template&gt;\n&lt;script&gt;\nexport default &#123;\n    &#x2F;&#x2F; ...\n    data() &#123;\n        return &#123;\n          &#x2F;&#x2F; 默认\n          message: &#39;我是来自子组件的消息&#39;\n        &#125;\n    &#125;,\n    methods: &#123;\n      click() &#123;\n            this.$emit(&#39;childFn&#39;, this.message);\n        &#125;\n    &#125;    \n&#125;\n&lt;&#x2F;script&gt;</code></pre>\n\n<ul>\n<li><p>这样我们就基本实现了子组件向父组件发送值了:</p>\n<p><img src=\"https://upload-images.jianshu.io/upload_images/2891127-c5db663c172ea735.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/388\" alt=\"img\"></p>\n<p>点击send发送</p>\n</li>\n</ul>\n<p><img src=\"https://upload-images.jianshu.io/upload_images/2891127-129823130a431ace.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/391\" alt=\"img\"></p>\n<p>父组件接收组件传过来的值</p>\n<h2 id=\"小结\"><a href=\"#小结\" class=\"headerlink\" title=\"小结\"></a>小结</h2><ul>\n<li>通过<code>&quot;props down , events up&quot;</code>我们就简单的实现了父子组件之间的双向传值，这是很基本的知识点，其它还有$invoke等等方法，大家可以去官网好好看看。</li>\n<li>关于通信和状态管理就必须了解<code>vuex</code>了，后面我们在项目中当涉及了再好好讲。</li>\n</ul>\n<h1 id=\"vue中-关于-emit的用法\"><a href=\"#vue中-关于-emit的用法\" class=\"headerlink\" title=\"vue中 关于$emit的用法\"></a>vue中 关于$emit的用法</h1><p>1、父组件可以使用 props 把数据传给子组件。<br> 2、子组件可以使用 $emit 触发父组件的自定义事件。</p>\n<p>vm.$emit( event, arg ) //触发当前实例上的事件</p>\n<p>vm.$on( event, fn );//监听event事件后运行 fn； </p>\n<p>图一：点击之前例如：子组件：</p>\n<pre class=\"line-numbers language-html\" data-language=\"html\"><code class=\"language-html\">&lt;template&gt;\n  &lt;div class&#x3D;&quot;train-city&quot;&gt;\n    &lt;h3&gt;父组件传给子组件的toCity:&#123;&#123;sendData&#125;&#125;&lt;&#x2F;h3&gt; \n    &lt;br&#x2F;&gt;&lt;button @click&#x3D;&#39;select(&#96;大连&#96;)&#39;&gt;点击此处将‘大连’发射给父组件&lt;&#x2F;button&gt;\n  &lt;&#x2F;div&gt;\n&lt;&#x2F;template&gt;\n&lt;script&gt;\n  export default &#123;\n    name:&#39;trainCity&#39;,\n    props:[&#39;sendData&#39;], &#x2F;&#x2F; 用来接收父组件传给子组件的数据\n    methods:&#123;\n      select(val) &#123;\n        let data &#x3D; &#123;\n          cityname: val\n        &#125;;\n        this.$emit(&#39;showCityName&#39;,data);&#x2F;&#x2F;select事件触发后，自动触发showCityName事件\n      &#125;\n    &#125;\n  &#125;\n&lt;&#x2F;script&gt;</code></pre>\n\n<p>父组件：</p>\n<pre class=\"line-numbers language-html\" data-language=\"html\"><code class=\"language-html\">&lt;template&gt;\n    &lt;div&gt;\n        &lt;div&gt;父组件的toCity&#123;&#123;toCity&#125;&#125;&lt;&#x2F;div&gt;\n        &lt;train-city @showCityName&#x3D;&quot;updateCity&quot; :sendData&#x3D;&quot;toCity&quot;&gt;&lt;&#x2F;train-city&gt;\n    &lt;&#x2F;div&gt;\n&lt;template&gt;\n&lt;script&gt;\n  import TrainCity from &quot;.&#x2F;train-city&quot;;\n  export default &#123;\n    name:&#39;index&#39;,\n    components: &#123;TrainCity&#125;,\n    data () &#123;\n      return &#123;\n        toCity:&quot;北京&quot;\n      &#125;\n    &#125;,\n    methods:&#123;\n      updateCity(data)&#123;&#x2F;&#x2F;触发子组件城市选择-选择城市的事件\n        this.toCity &#x3D; data.cityname;&#x2F;&#x2F;改变了父组件的值\n        console.log(&#39;toCity:&#39;+this.toCity)\n      &#125;\n    &#125;\n  &#125;\n&lt;&#x2F;script&gt;</code></pre>\n\n<p>图一：点击之前的数据的数据</p>\n<p><img src=\"https://img-blog.csdn.net/20180530102959789\" alt=\"img\"></p>\n<p>图二：点击之后的数据</p>\n<p><img src=\"https://img-blog.csdn.net/20180530103028525\" alt=\"img\"></p>\n","text":"vue父子组件之间的传值 本章主要说下父子组件的传值。 Github：https://github.com/Ewall1106/mall 父组件向子组件传值 第一个就是要明白怎么在父页面中向子组件中传值？你可以给子组件传入一个静态的值： 图片来自vue官网 但我们一般都是需要传动...","link":"","photos":[],"count_time":{"symbolsCount":"3.9k","symbolsTime":"4 mins."},"categories":[],"tags":[],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#vue%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E4%B9%8B%E9%97%B4%E7%9A%84%E4%BC%A0%E5%80%BC\"><span class=\"toc-text\">vue父子组件之间的传值</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%88%B6%E7%BB%84%E4%BB%B6%E5%90%91%E5%AD%90%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%80%BC\"><span class=\"toc-text\">父组件向子组件传值</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%AD%90%E7%BB%84%E4%BB%B6%E5%90%91%E7%88%B6%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%80%BC\"><span class=\"toc-text\">子组件向父组件传值</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5\"><span class=\"toc-text\">1. 基本概念</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-%E4%B8%BE%E4%BE%8B%E8%AF%B4%E6%98%8E\"><span class=\"toc-text\">2. 举例说明</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%B0%8F%E7%BB%93\"><span class=\"toc-text\">小结</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#vue%E4%B8%AD-%E5%85%B3%E4%BA%8E-emit%E7%9A%84%E7%94%A8%E6%B3%95\"><span class=\"toc-text\">vue中 关于$emit的用法</span></a></li></ol>","author":{"name":"JBR_Bunjie","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/90251718?v=4","link":"/","description":"仿生程序员会在光环上遇见乐正绫吗？","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili-fill.svg","link":"https://space.bilibili.com/415377461"},"github":{"icon":"/svg/social_github.svg","link":"https://github.com/JBR-Bunjie"}}}},"mapped":true,"prev_post":{"title":"","uid":"f73a8e23e6f6f669cf99c7dba8fa0722","slug":"Web Dev/Front End/VUE/生命周期","date":"2023-03-07T16:14:46.453Z","updated":"2021-10-30T12:55:15.000Z","comments":true,"path":"api/articles/Web Dev/Front End/VUE/生命周期.json","keywords":null,"cover":[],"text":" beforeCreate( 创建前 )在实例初始化之后，数据观测和事件配置之前被调用，此时组件的选项对象还未创建，el 和 data 并未初始化，因此无法访问methods， data， computed等上的方法和数据。 created ( 创建后 ）实例已经创建完成之后被调...","link":"","photos":[],"count_time":{"symbolsCount":995,"symbolsTime":"1 mins."},"categories":[],"tags":[],"author":{"name":"JBR_Bunjie","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/90251718?v=4","link":"/","description":"仿生程序员会在光环上遇见乐正绫吗？","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili-fill.svg","link":"https://space.bilibili.com/415377461"},"github":{"icon":"/svg/social_github.svg","link":"https://github.com/JBR-Bunjie"}}}}},"next_post":{"title":"","uid":"f73a8e23e6f6f669cf99c7dba8fa0722","slug":"Web Dev/Front End/VUE/Vue入门","date":"2023-03-07T16:14:46.448Z","updated":"2021-09-22T06:44:19.000Z","comments":true,"path":"api/articles/Web Dev/Front End/VUE/Vue入门.json","keywords":null,"cover":null,"text":"","link":"","photos":[],"count_time":{"symbolsCount":0,"symbolsTime":"1 mins."},"categories":[],"tags":[],"author":{"name":"JBR_Bunjie","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/90251718?v=4","link":"/","description":"仿生程序员会在光环上遇见乐正绫吗？","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili-fill.svg","link":"https://space.bilibili.com/415377461"},"github":{"icon":"/svg/social_github.svg","link":"https://github.com/JBR-Bunjie"}}}}}}