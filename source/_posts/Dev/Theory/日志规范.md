---
title: 日志格式
date: 2022-12-23 12:23:23
tags:
  - Theroy
categories:
  - Theroy
<!--feature: true-->
cover: https://raw.githubusercontent.com/JBR-Bunjie/JBR-Bunjie/main/back.jpg
---

# 日志格式

通用前缀 class.method LEVEL | KEY | SUB_KEY | param1=x;param2=x;... | rs=JSON | traceId=xxx[ | 其它自定义日志]

KEY：标示业务领域，如“领券”

SUBKEY：标示业务领域中具体的逻辑，如“策略决策”、“权益决策”、“调用 UMP”等

**LEVEL：DEBUG / TRACE / MONITOR / WARN**

## 要求：

查找日志时，再一次查询中可以顺利通过一个或多个关键字的组合，找到一条完整的业务处理链路。

如通过一个 userId 和 KEY，可以完整的找到这个用户的领券全过程。

## 调试日志

仅在调试阶段需要输出，线上一般不输出。

日志可以包括每次请求的详细出入参等信息。

线上必须有开关可以控制这类日志的打印。

level=DEBUG

## 普通日志

用户追踪必要的代码执行记录，线上一般打印出来，大促时可以降级。

日志可以包括每次外部请求的详细出入参，以及内部请求的关键参数。

请求出入参较长时，可考虑只打印关键参数。

level=TRACE

## 业务指标项日志

记录必要的业务活动，通过 sls 或 sunfire 产出业务大盘

level=MONITOR

## 监控报警项日志

通过 sunfire 产出报警

level=WARN

## 自定义日志

不做格式要求，自行打印，注意避免过量日志造成线上磁盘资源紧张
