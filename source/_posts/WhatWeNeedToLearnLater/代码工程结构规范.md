# 代码工程结构规范

# 工程模块

xxx为工程名称

- xxx-api

此模块最终打包jar，仅提供模型定义和接口定义等需要对二方提供的定义内容，不包含任何实现。二方系统依赖本模块，不应当对其造成任何影响。

- xxx-client/fatclient

此模块最终打包jar，是对二方提供的富客户端，包含了特定功能的具体实现。富客户端可以依赖稳定的中间件，对特殊业务场景需要引入特殊中间件或二方库的，需要单独打包。

- xxx-dal

提供数据访问的实现，如TDDL、LIndorm或其它存储。

- xxx-base

工程内公共逻辑的实现，如通用的Utils和服务等。

- xxx-service

各个业务场景的具体实现。

- xxx-task

异步链路的实现，如MQ和DTS等。

- xxx-start

工程启动代码。

# 模块依赖

- xxx-api

对外发布，除common等公共的依赖外，api包不能引入任何依赖。

- xxx-client/fatclient

对外发布，仅依赖api和稳定的中间件。

- xxx-dal

严禁对外发布，依赖数据层的相关中间件，如tddl等

- xxx-base

严禁对外发布，依赖api和dal，同时可以引入必要的二方和三方依赖

- xxx-service

严禁对外发布，依赖basei，同时可以引入必要的二方和三方依赖

- xxx-task

严禁对外发布，依赖base，依赖相关中间件如MQ和DTS等，同时可以引入必要的二方和三方依赖。

- xxx-start

严禁对外发布，工程启动代码。



# 代码包命名和组织规范

- api

公共部分统一放在common下；

以具体功能作为划分依据，同一个功能需要在同一个包下，每个包下，按需设置model、param、enums等子包，分别用于定义DTO等模型、参数和枚举常量等

例如：

xxx-api

 \- common

​    \- model

​    \- param

​    \- enums

​    \- errorcodes

​    \- constants

 \- <xx功能>

​    \- model

​    \- param

​    \- enums

​    xxxxService

- service

与api对应，提供对应的实现

- task

异步链路的具体处理逻辑，统一放到handler或process包，按功能区分不同子包。

MQ消费者统一定义在mq包，DTS的处理器，统一定义在dts下。

框架层代码，统一放在除上述包外的独立包中。

例如：

xxx-task

 \- process

​    \- <xx功能>

​       XXXMqHandler

​       XXXDtsHandler

 \- mq

​    XXXConsumer

​    XXXConsumer

 \- dts

​    XXXProcessor