---
title: 三角形面积计算
date: 2022-12-23 12:23:23
tags:
  - triangle area
  - Algorithm
categories:
  - Algorithm
mathjax: true
<!--feature: true-->
cover: https://raw.githubusercontent.com/JBR-Bunjie/JBR-Bunjie/main/back.jpg
---

## 求面积

### 1.底高求面积

已知三角形底a，高h，则 
$$
S = \frac{a·h}{2}
$$

### 2.海伦公式

已知三角形三边a,b,c，则
$$
\begin{aligned}
p &= \frac{a+b+c}{2}\\
S &= \sqrt{[p(p - a)(p - b)(p - c)]}\\
&=\sqrt{[(1/16)(a+b+c)(a+b-c)(a+c-b)(b+c-a)]}\\
&=1/4\sqrt{[(a+b+c)(a+b-c)(a+c-b)(b+c-a)]}
\end{aligned}
$$

### 3.边角公式

已知三角形两边a,b,这两边夹角$\alpha$，则有：
$$
\begin{aligned}
S = \frac{a·b·\sin\alpha}{2}
\end{aligned}
$$
即两夹边之积乘夹角正弦值的一半。

### 4.内切圆面积公式

设三角形三边分别为a、b、c，内切圆半径为r

则三角形面积
$$
S = \frac{(a+b+c)·r}{2}
$$

### 5.外接圆面积公式

设三角形三边分别为a、b、c，外接圆半径为R

则三角形面积
$$
\begin{aligned}
S &= \frac{a · b · c}{4R}\\
&= 2R^2 · \sin{A} · \sin{B} · \sin{C}
\end{aligned}
$$

### 6.行列式形式

$$
S = \frac{1}{2}
\left|
\begin{array}{cccc}
a&b&1\\
c&d&1\\
e&f&1
\end{array}
\right|
$$

为三阶行列式，此三角形$ABC$在平面直角坐标系内$A(a,b), B(c,d), C(e,f)$，这里$ABC$选取最好按逆时针顺序从右上角开始取，因为这样取得出的结果一般都为正值，如果不按这个规则取，可能会得到负值，但不要紧，只要取绝对值就可以了，不会影响三角形面积的大小。

### 7.中线面积公式

Ma,Mb,Mc为三角形的中线长.
$$
S=\sqrt{[(Ma+Mb+Mc)*(Mb+Mc-Ma)*(Mc+Ma-Mb)*(Ma+Mb-Mc)]/3}
$$

## 单色三角形 

### Description

在空间中给出了n个点。这些点任三点不共线，并且每两个点之间都有一条线相连，每一条线不是红的就是黑的。在这些点和线组成的三角形中，如果一个三角形的三条边的颜色都相同，那么我们就称这个三角形为单色三角形。现给出所有涂红色的线，试求出单色三角形的数目。

### mathematics side

#### Question:

给定空间里n(n<=1000)个点，假设任意三个点都不共线。

将任意两点之间的连线涂上红色或者黑色。

问3条边同色的三角形个数。

---

#### Answer:

由于三角形总数C(n,3)，所以求出异色三角形个数就求出了同色三角形个数。

值得注意的是，当我们比较一个三角形是否是单色三角形时，我们实际比较的是三角形中的任意两条边，而不是比较一个“三角形”

利用这样的比较关系，我们比较的对象是单个顶点而不是每个三角形，易知：一个异色三角形存在两个顶点，该三角形中与它们相邻的两边是不同色的；而对从一个顶点出发的两条异色边都属于一个异色三角形。这是个一对二的关系。

已知第i个点会连接总共n-1条边。设第i个点连接了a条红边、n-1-a条黑边，由于边之间的组合关系，这些边一定属于a(n-1-a)个不同的异色三角形。由于异色三角形都会被考虑两次，所以最终的答案为C(n, 3) - sigmaΣ(i from 1 to n)a(n-1-a)/2

请注意，每个i下的a都是不同的，为了彰显这之中的关联，可以改设为ai，故得答案：

**C(n, 3) - Σ(i from 1 to n) ai \* (n - 1 - ai) / 2**

---

### programming side

#### Question:

任务：

请写一个程序：

从文本文件中读入点数和对红色连线的描述；

找出该图中红色三角形的数目；

把结果输出到文件TRO.OUT中。

输入格式：

在文本文件TRO.IN的第一行包括一个整数n，3 <= n <= 1000，为空间中的点数。

该文件的第二行为一个整数m，0 <= m <= 250000，为红色连线的数目。

以下的m行中每行为两个用空格分开的整数p和k，1 <= p < k <= n，表示第p点和第k号点之间的连线为红色。

输出格式：

你应该在文本文件TRO.OUT输出唯一的一个整数——同色三角形的数目。

样例：

输入

>6
>9
>1 2
>2 3
>2 5
>1 4
>1 6
>3 4
>4 5
>5 6
>3 6

输出

> 2

#### Answer:

按照在mathematics side中的思路，我们可以发现，单个点的比较中，是不存在“方向”的，或者说，所比较的每条线都是双向的。而同时也不在意当前点对点的具体内容，我们只在意当前点下，具体 有 多少“红线”与“黑线”

故我们用一个字典来记录各个顶点下的线数即可

```cpp
#include <iostream>
#include <cstring>
#include <cstdio>
 
using namespace std;
 
const int maxn = 200010;
typedef long long LL;
 
int a[maxn];
int cnt[maxn];
int n,num;
int ele[100];
 
void fen(int x)//素因子分解
{
    num=0;
    for(int i=2;i*i<=x;i++){
        if(x%i==0){
            ele[num++]=i;
            while(x%i==0)
                x/=i;
        }
    }
    if(x>1) ele[num++]=x;
}
 
void init()//预处理与a[i]不互质的数的个数
{
    memset(cnt,0,sizeof(cnt));
    scanf("%d",&n);
    for(int i=0;i<n;i++){
        scanf("%d",&a[i]);
        fen(a[i]);
        for(int j=1;j<(1<<num);j++){
            int tmp=1;
            for(int k=0;k<num;k++)
                if((1<<k)&j) tmp*=ele[k];
            cnt[tmp]++;
        }
    }
}
 
LL solve()
{
    LL ans=n;
    ans=ans*(n-1)*(n-2)/6;//防止爆int
    LL sum=0;
    for(int i=0;i<n;i++){//容斥原理求与a[i]不互质的数的个数
        fen(a[i]);
        LL tmp=0;
        for(int j=1;j<(1<<num);j++){
            LL ret = 1;
            int t=0;
            for(int k=0;k<num;k++){
                if((1<<k)&j){
                    ret*=ele[k];
                    t++;
                }
            }
            if(t&1) tmp+=cnt[ret];
            else tmp-=cnt[ret];
        }
        if(tmp==0) continue;
        else sum+=(n-tmp)*(tmp-1);
        //cout<<i<<" "<<tmp<<" "<<(n-tmp)*(tmp-1)/2<<endl;
    }
    return ans-sum/2;
}
int main()
{
    int t;
    scanf("%d",&t);
    while(t--){
        init();
        LL ans=solve();
        printf("%I64d\n",ans);
    }
    return 0;
}
```

