---
title: 字符画
date: 2022-12-23 12:23:23
tags:
  - Algorithm
categories:
  - Algorithm
<!--feature: true-->
cover: https://raw.githubusercontent.com/JBR-Bunjie/JBR-Bunjie/main/back.jpg
---

# 字符画

## 另类应用

当你需要在shell里查看图片时

## 现有框架

ascii-image-converter [TheZoraiz/ascii-image-converter: A cross-platform command-line tool to convert images into ascii art and print them on the console. Now supports braille art! (github.com)](https://github.com/TheZoraiz/ascii-image-converter)

## 原理

字符画是一系列字符的组合，我们可以把字符看作是比较大块的像素，一个字符能表现一种颜色，字符的种类越多，可以表现的颜色也越多，图片也会更有层次感。

最终显示的是黑白色的字符画，那么彩色的图 片怎么转换成黑白的呢？这里就需要了解灰度值的概念了。

<span style="font-size:16px;">灰度值：指黑白图像中点的颜色深度，范围一般从0到255，白色为255，黑色为0，故黑白图片也称灰度图像。</span>
我们利用下面的公式将像素的RGB值转换成灰度值：

<span style="color:#ff0000;">gray ＝ 0.2126 * r + 0.7152 * g + 0.0722 * b</span>

用不同的字符代表不同的灰度值，字符的种类和数量可以根据自己需要的效果进行调整，最好从前往后可以看到明显的变化，最后一个字符为空格符最佳：

```python
ascii_char = list("$@B%8&WM#*oahkbdpqwmZO0QLCJUYXzcvunxrjft/\|()1{}[]?-_+~<>i!lI;:,\"^`'. ")
```

图片转字符画的关键思想是将图片的灰度值与你自己设定的字符集之间建立映射关系，不同区间的灰度值对应不同的字符，之后将图片每一个像素对应的字符打印出来就是我们要的字符画啦~ 这里提供两种方法：

1. 获取图片的RGB值，利用公式： Gray = R0.299 + G0.587 + B*0.114 计算可得每个像素点的灰度值，之后再建立映射即可。
2. 先将彩色图片转换为黑白图片，然后直接将每个像素点的灰度值与字符集建立映射。

## 实现思路？

思路也很简单，通过像素的**灰度**来映射出ASCII字符。灰度值越大，所映射的ASCII字符占的单位面积越大，也就是看起来越黑。

（例如某点的灰度是0，那么对应的字符就是空格；类似的，灰度为255时，对应的字符就是“$”）

实际操作起来会遇到的问题就是：

图片太大，输出后的文本即使使用最小字体也看不全

ASCII字符不是方形像素（长宽比不是1:1）

处理方法就是对图片的大小数据进行处理（而不是原图修改）然后映射。

总体上来说制作字符画还是比较简单的，需要处理的情况没有那么多。

### 黑白字符画

黑白字符画应该是难度最低的了。大致思路是这样的：

- 设计一个从深到浅（0\~255，黑\~白）的字符列表；
- 将原图转为黑白，并量化（quantization，如从 0~255 量化为 0~16）从而匹配字符列表的长度；
- 将图片缩放为一个很小的图（如宽度 100）；
- 将每一个像素点的亮度转为对应字符；
- 输出为 .txt 文件。

### 彩色字符画

1. 将原图缩放为一个很小的缩略图（如宽度 100）；
2. 新建一个大的白色或黑色画布；
3. 计算好每个字符在画布上的位置，将缩略图中每一个像素点转为颜色相同的字符，并打印在画布指定位置上；
4. 将画布输出为图像（如 .png）文件。

### Reference：

*<u>**[字符画——从入门到不屑 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/48941293)**</u>*
