---
title: 用户目录下的隐藏文件
date: 2022-1-16 11:07:12
tags:
  - Linux
categories:
  - Linux
<!--feature: true-->
cover: https://raw.githubusercontent.com/JBR-Bunjie/JBR-Bunjie/main/back.jpg
---

# 用户目录下的隐藏文件

你的 home 目录下藏着很多隐藏文件，而.bashrc 就是其中之一

## .bashrc 是什么及修改.bashrc 能做到什么

如果你运行一个基于 Unix 或者类 Unix 的操作系统，bash 很有可能是作为默认终端被安装的。虽然存在很多不同的 shell，bash 却是最常见或许也是最主流的。同时，bash 在每次启动时都会加载 .bashrc 文件的内容。每个用户的 home 目录都有这个 shell 脚本。它用来存储并加载你的终端配置和环境变量。

也就是说，一般情况下，我们能通过修改.bashrc 文件来定制我们当前账户的 bash

### 修改

#### 为命令设置别名：alias

```bash
alias ll = "ls -lha"
```

#### 函数:

```bash
function_name () {
	command_1
	command_2
}

# md () {
#   mkdir -p $1
#   cd $1
# }
```

[什么是 .bashrc，为什么要编辑 .bashrc？ | Linux 中国 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/33546077)

## 更多的隐藏文件？

### 补习：linux 系统变量的类型

按变量的生存周期划分：

- 永久的：需要修改配置文件，变量永久生效。

- 临时的：使用 export 命令声明即可，变量在关闭 shell 时失效。

在配置永久的环境变量时，又可以按照作用范围分为：

- 用户环境变量
- 系统环境变量。

系统环境变量对所有系统用户都有效，用户环境变量仅仅对当前的用户有效。

### 设置环境变量

#### 直接运行 export 命令定义变量

在 shell 的命令行下直接使用[export 变量名=变量值] 定义变量。该变量只在当前的 shell（BASH）或其子 shell（BASH）下是有效的，shell 关闭了，变量也就失效了，再打开新 shell 时就没有这个变量，需要使用的话还需要重新定义。

#### 修改系统环境变量

系统环境变量一般保存在下面的文件中

```bash
/etc/profile
```

全局（公有）配置，不管是哪个用户，登录时都会读取该文件。

```bash
/etc/bash.bashrc
```

它也是全局（公有）的 bash 执行时，不管是何种方式，都会读取此文件。

```bash
/etc/environment
```

不要轻易修改此文件

#### 修改用户环境变量

用户环境变量通常被存储在下面的文件中：

```bash
~/.profile
```

若 bash 是以 login 方式执行时，读取\~/.bash_profile，若它不存在，则读取\~/.bash_login，若前两者不存在，读取~/.profile。

```bash
~/.bash_profile 或者~./bash_login
```

若 bash 是以 login 方式执行时，读取~/.bash_profile，若它不存,则读取~/.bash_login，若前两者不存在，读取 ~/.profile。
只有 bash 是以 login 形式执行时，才会读取.bash_profile，Unbutu 默认没有此文件，可新建。 通常该配置文件还会配置成去读取~/.bashrc。

```bash
~/.bashrc
```

当 bash 是以 non-login 形式执行时，读取此文件。若是以 login 形式执行，则不会读取此文件。

~/.bash_profile 是交互式、login 方式进入 bash 运行的
~/.bashrc 是交互式 non-login 方式进入 bash 运行的通常二者设置大致相同，所以通常前者会调用后者。

#### 修改环境变量配置文件

如想将一个路径加入到环境变量（例如$PATH）中，可以像下面这样做（修改/etc/profile）：
sudo vi /etc/profile
以环境变量 PATH 为例子，环境变量的声明格式：

```bash
PATH=$PATH:PATH_1:PATH_2:PATH_3:------:PATH_N
export PATH
```

你可以自己加上指定的路径，中间用冒号隔开。环境变量更改后，在用户下次登陆时生效，如果想立刻生效，则可执行下面的语句：

```bash
$source /etc/profile
```

### 环境配置文件的区别

#### profile、 bashrc、.bash_profile、 .bashrc 介绍

bash 会在用户登录时，读取下列四个环境配置文件：

```bash
全局环境变量设置文件：/etc/profile、/etc/bashrc。
用户环境变量设置文件：~/.bash_profile、~/.bashrc。
```

读取顺序：① /etc/profile、② \~/.bash_profile、③ \~/.bashrc、④ /etc/bashrc。

```bash
/etc/profile：此文件为系统的每个用户设置环境信息，系统中每个用户登录时都要执行这个脚本，如果系统管理员希望某个设置对所有用户都生效，可以写在这个脚本里，该文件也会从/etc/profile.d目录中的配置文件中搜集shell的设置。
~/.bash_profile：每个用户都可使用该文件设置专用于自己的shell信息，当用户登录时，该文件仅执行一次。默认情况下，他设置一些环境变量，执行用户的.bashrc文件。
~/.bashrc：该文件包含专用于自己的shell信息，当登录时以及每次打开新shell时，该文件被读取。
/etc/bashrc：为每一个运行bash shell的用户执行此文件，当bash shell被打开时，该文件被读取。
```

#### .bashrc 和.bash_profile 的区别

.bash_profile 会用在登陆 shell， .bashrc 使用在交互式非登陆 shell 。简单说来，它们的区别主要是.bash_profile 是在你每次登录的时候执行的；.bashrc 是在你新开了一个命令行窗口时执行的。

当通过控制台进行登录（输入用户名和密码）：在初始化命令行提示符的时候会执行.bash_profile 来配置你的 shell 环境。但是如果已经登录到机器，在 Gnome 或者是 KDE 也开了一个新的终端窗口（xterm），这时，.bashrc 会在窗口命令行提示符出现前被执行。当你在终端敲入/bin/bash 时.bashrc 也会在这个新的 bash 实例启动的时候执行。

#### 建议

大多数的时候你不想维护两个独立的配置文件，一个登录的一个非登录的 shell。当你设置 PATH 时，你想在两个文件都适用。可以在.bash_profile 中调用.bashrc，然后将 PATH 和其他通用的设置放到.bashrc 中。

要做到这几点，添加以下几行到.bash_profile 中：

```bash
if [ -f ~/.bashrc ]; then
    . ~/.bashrc
fi
```

现在，当你从控制台登录机器的时候，.bashrc 就会被执行。

### 常用的环境变量

| command? | Description                                    |
| -------- | :--------------------------------------------- |
| BASH     | Bash Shell 的全路径                            |
| CDPATH   | 用于快速进入某个目录。                         |
| PATH     | 决定了 shell 将到哪些目录中寻找命令或程序      |
| HOME     | 当前用户主目录                                 |
| HISTSIZE | 历史记录数                                     |
| LOGNAME  | 当前用户的登录名                               |
| HOSTNAME | 指主机的名称                                   |
| SHELL    | 当前用户 Shell 类型                            |
| LANGUGE  | 语言相关的环境变量，多语言可以修改此环境变量   |
| MAIL     | 当前用户的邮件存放目录                         |
| PS1      | 基本提示符，对于 root 用户是#，对于普通用户是$ |

## Reference

[0] [Linux 的环境变量.bash_profile .bashrc profile 文件 - lvmenghui001 - 博客园 (cnblogs.com)](https://www.cnblogs.com/lmh001/p/9999859.html)

[1] /etc/profile、/etc/bashrc、~/.bash_profile、~/.bashrc
http://blog.chinaunix.net/uid-26435987-id-3400127.html
[2] Linux 如何修改 env 看到的环境变量？ .bashrc 和.bash_profile 区别
http://blog.csdn.net/xifeijian/article/details/13355031
[3] linux 环境变量，bashrc 与 bashprofile
http://blog.sina.com.cn/s/blog_43e5ad4e0101ei43.html
